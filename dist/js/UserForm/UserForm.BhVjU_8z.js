import"../vue/vue.Dfo81L2Q.js";import{u as D}from"../vue-i18n/vue-i18n.DjO1PVT4.js";import{F as le}from"../FileUploadMultiple/FileUploadMultiple.XhmJ4C99.js";import{ap as _e,P as pe,$ as ge}from"../@element-plus/@element-plus.BNeHluFm.js";import{_ as Q}from"../../assets/index-fCswSekQ.js";import{am as h,K as B,o as C,L as i,S as l,a as p,Q as x,R as w,j as z,_ as W,r as V,w as A,q as X,c as L,F as j,a8 as K,O as m,t as H}from"../@vue/@vue.CVGyaoMH.js";import{z as ve}from"../vue-tel-input/vue-tel-input.B5InR4bt.js";import{u as $,d as ee}from"../user/user.62TZfaxK.js";import{u as te,d as ae}from"../minio/minio.DwZpSMzM.js";import{c as re,E as O}from"../element-plus/element-plus.CU5xiOkY.js";const be={__name:"CertificateFormDialog",props:{visible:Boolean,certificate:Object},emits:["save","close"],setup(F,{expose:a,emit:k}){a();const e=F,o=k,{t:P}=D(),_=z(()=>!!(n!=null&&n.id)),f=V({certificate_name:[{required:!0,message:"Certificate name is required",trigger:"blur"}],issue_date:[{required:!0,message:"Issue date is required",trigger:"change"}]}),y=V(),n=W({id:null,certificate_name:"",certificate_number:"",issue_date:null,expiration_date:null,image_list:[],new_image_list:[],removed_image_list:[]}),b=V([]),U=V([]),I=(S,E)=>{switch(S){case"imageList":b.value=E;break;case"removeImage":U.value=E;break}};function u(){n.id=null,n.certificate_name="",n.certificate_number="",n.issue_date="",n.expiration_date="",n.image_list=[],n.new_image_list=[],n.removed_image_list=[],b.value=[],U.value=[]}A(()=>e.visible,S=>{var E,T;S&&(e.certificate?(u(),Object.assign(n,e.certificate)):u(),(T=(E=t.value)==null?void 0:E.clearValidate)==null||T.call(E))}),A(()=>e.certificate,S=>{!e.visible||!S||Object.assign(n,S)},{immediate:!0});const t=V(null),R=async()=>{try{await t.value.validate(),o("save",{...n,new_image_list:b.value,removed_image_list:U.value}),u()}catch{}};X(()=>{u()});const q={props:e,emit:o,t:P,isEdit:_,rules:f,certificateFormImageUploadRef:y,certificateForm:n,newImages:b,removedImages:U,handleUpdate:I,resetCertificateForm:u,formRef:t,submitForm:R,reactive:W,ref:V,watch:A,computed:z,onMounted:X,get useI18n(){return D},FileUploadMultiple:le,get ArrowLeftBold(){return _e}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}},we={class:"header-container"},Ue={class:"dialog-title"},he={class:"image-container"};function ye(F,a,k,e,o,P){const _=h("el-icon"),f=h("el-button"),y=h("el-input"),n=h("el-form-item"),b=h("el-date-picker"),U=h("el-form"),I=h("el-dialog");return C(),B(I,{"model-value":k.visible,onClose:a[8]||(a[8]=u=>F.$emit("close")),title:e.isEdit?e.t("user.editCertificate"):e.t("user.addCertificate"),width:"50%",top:"10vh","show-close":!1},{header:i(()=>[p("div",we,[l(f,{link:"",onClick:a[0]||(a[0]=u=>F.$emit("close")),class:"back-button"},{default:i(()=>[l(_,{size:25},{default:i(()=>[l(e.ArrowLeftBold)]),_:1})]),_:1}),p("span",Ue,w(e.isEdit?e.t("user.editCertificate"):e.t("user.addCertificate")),1)])]),footer:i(()=>[l(f,{onClick:a[7]||(a[7]=u=>F.$emit("close"))},{default:i(()=>[x(w(e.t("common.cancel")),1)]),_:1}),l(f,{type:"primary",onClick:e.submitForm},{default:i(()=>[x(w(e.t("common.confirm")),1)]),_:1})]),default:i(()=>[l(U,{model:e.certificateForm,"label-width":"150px",ref:"formRef",rules:e.rules},{default:i(()=>[l(n,{label:e.t("user.certificateName"),prop:"certificate_name"},{default:i(()=>[l(y,{modelValue:e.certificateForm.certificate_name,"onUpdate:modelValue":a[1]||(a[1]=u=>e.certificateForm.certificate_name=u)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.t("user.certificateNumber"),prop:"certificate_number"},{default:i(()=>[l(y,{modelValue:e.certificateForm.certificate_number,"onUpdate:modelValue":a[2]||(a[2]=u=>e.certificateForm.certificate_number=u)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.t("user.issueDate"),prop:"issue_date"},{default:i(()=>[l(b,{modelValue:e.certificateForm.issue_date,"onUpdate:modelValue":a[3]||(a[3]=u=>e.certificateForm.issue_date=u),type:"date"},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:e.t("user.expiryDate"),prop:"expiration_date"},{default:i(()=>[l(b,{modelValue:e.certificateForm.expiration_date,"onUpdate:modelValue":a[4]||(a[4]=u=>e.certificateForm.expiration_date=u),type:"date"},null,8,["modelValue"])]),_:1},8,["label"]),p("div",he,[l(e.FileUploadMultiple,{ref:"certificateFormImageUploadRef","image-label":e.t("common.imageUpload"),"onUpdate:imageList":a[5]||(a[5]=u=>e.handleUpdate("imageList",u)),"onUpdate:removedExistingImages":a[6]||(a[6]=u=>e.handleUpdate("removeImage",u)),"upload-type":"images","max-images":5,existingImageList:e.certificateForm.image_list,"title-label-position":"right"},null,8,["image-label","existingImageList"])])]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}const Ve=Q(be,[["render",ye],["__scopeId","data-v-d90178d5"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/user/components/CertificateFormDialog.vue"]]),Ce={__name:"CertificateList",props:{certificates:{type:Array,required:!0}},emits:["edit","delete","add"],setup(F,{expose:a}){a();function k(P){if(!P)return"-";const _=new Date(P);return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`}const{t:e}=D(),o={fmt:k,t:e,get useI18n(){return D},get Edit(){return ge},get Delete(){return pe}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},Fe={class:"certificate-container"},Pe={class:"certificate-image-preview-section"},xe={class:"certificate-detail-section"},ke={class:"certificate-detail-row"},Ie={class:"certificate-detail-row"},Ne={class:"certificate-detail-row"},Re={class:"certificate-actions-section"},Se={key:1,class:"empty-cert-placeholder"},Ee={style:{display:"flex","flex-direction":"row","justify-content":"flex-end"}};function Le(F,a,k,e,o,P){const _=h("el-image"),f=h("el-text"),y=h("el-button");return C(),L("div",Fe,[k.certificates.length?(C(!0),L(j,{key:0},K(k.certificates,n=>{var b,U;return C(),L("div",{key:n.id,class:"certificate-card"},[m(" Left: image preview "),p("div",Pe,[l(_,{src:((U=(b=n.image_list)==null?void 0:b[0])==null?void 0:U.url)||"","preview-src-list":n.image_list,"initial-index":0,fit:"cover",class:"certificate-thumb"},{error:i(()=>[...a[2]||(a[2]=[p("div",{class:"image-placeholder"},"No Image",-1)])]),_:2},1032,["src","preview-src-list"])]),m(" Middle: details "),p("div",xe,[p("div",ke,[l(f,{tag:"b"},{default:i(()=>[x(w(n.certificate_name),1)]),_:2},1024)]),p("div",Ie,w(e.t("user.certificateNumber"))+": "+w(n.certificate_number),1),p("div",Ne,[p("div",null,w(e.t("user.issueDate"))+": "+w(e.fmt(n.issue_date)),1),p("div",null,w(e.t("user.expiryDate"))+": "+w(e.fmt(n.expiration_date)),1)])]),m(" Right: actions "),p("div",Re,[p("div",null,[l(y,{class:"certificate-actions-item",icon:e.Edit,size:"small",onClick:I=>F.$emit("edit",n)},{default:i(()=>[x(w(e.t("common.edit")),1)]),_:2},1032,["icon","onClick"])]),p("div",null,[l(y,{class:"certificate-actions-item",icon:e.Delete,type:"danger",size:"small",onClick:I=>F.$emit("delete",n)},{default:i(()=>[x(w(e.t("common.delete")),1)]),_:2},1032,["icon","onClick"])])])])}),128)):(C(),L("div",Se,[p("div",null,w(e.t("user.noCertificates")),1),p("div",null,[l(y,{plain:"",type:"primary",onClick:a[0]||(a[0]=n=>F.$emit("add"))},{default:i(()=>[x(w(e.t("user.addCertificate")),1)]),_:1})])])),p("div",Ee,[m(" Add Button "),k.certificates.length?(C(),B(y,{key:0,plain:"",type:"primary",onClick:a[1]||(a[1]=n=>F.$emit("add"))},{default:i(()=>[x(w(e.t("user.addCertificate")),1)]),_:1})):m("v-if",!0)])])}const qe=Q(Ce,[["render",Le],["__scopeId","data-v-f72c1217"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/user/components/CertificateList.vue"]]),Oe={__name:"UserForm",props:{user:{type:Object,default:null},roleOptions:{type:Array,default:()=>[]},departmentOptions:{type:Array,default:()=>[]}},emits:["confirm","cancel","update:loading"],setup(F,{expose:a,emit:k}){a();const e=F,{t:o}=D(),P=k,_=V(),f=V(),y=V(!1),n=V(null),b=V(),U=V(),I=V(!1),u=V(!1),t=V(q()),R=V(null);A(()=>e.user,async r=>{if(r){const s=S(r);t.value=s,R.value=JSON.parse(JSON.stringify(s))}else t.value=q(),R.value=null;await H(),_.value&&_.value.clearValidate()},{immediate:!0}),A(I,async()=>{var r;await H(),(r=_.value)==null||r.clearValidate(["newPassword","confirmPassword"])});function q(){return{id:null,first_name:"",last_name:"",department_id:null,role_list:[],email:"",phone_number:"+1",enabled:!0,employee_number:"",image:null,certificates:[],teams:[],newPassword:"",confirmPassword:""}}function S(r){var s;return I.value=!1,{...q(),...r,role_list:((s=r.roles)==null?void 0:s.map(g=>g.id))||[]}}const E=r=>{n.value={...r},y.value=!0},T=()=>{n.value=null,y.value=!0},ie=r=>{t.value.certificates=t.value.certificates.filter(s=>s.id!==r.id)},oe=r=>{if(r.id){const s=t.value.certificates.findIndex(g=>g.id===r.id);s!==-1&&(t.value.certificates[s]=r)}else r.id=Date.now(),t.value.certificates.push(r);y.value=!1},ne=z(()=>{const r={first_name:[{required:!0,message:o("user.validation.nameRequired"),trigger:"blur"},{validator:(N,c,v)=>{const d=[];/^[\p{Script=Han}A-Za-z]+$/u.test(c)||(/\d/.test(c)&&d.push(o("user.validation.nameNoNumbers")),/[^A-Za-z\d\u4e00-\u9fa5]/.test(c)&&d.push(o("user.validation.nameNoSpecialChars")),/\s/.test(c)&&d.push(o("user.validation.nameNoSpaces"))),d.length>0?v(new Error(d.join(" "))):v()},trigger:"blur"}],last_name:[{required:!0,message:o("user.validation.nameRequired"),trigger:"blur"},{validator:(N,c,v)=>{const d=[];/^[\p{Script=Han}A-Za-z]+$/u.test(c)||(/\d/.test(c)&&d.push(o("user.validation.nameNoNumbers")),/[^A-Za-z\d\u4e00-\u9fa5]/.test(c)&&d.push(o("user.validation.nameNoSpecialChars")),/\s/.test(c)&&d.push(o("user.validation.nameNoSpaces"))),d.length>0?v(new Error(d.join(" "))):v()},trigger:"blur"}],department_id:[{required:!0,message:o("user.validation.departmentRequired"),trigger:"blur"}],role_list:[{required:!0,message:o("user.validation.roleRequired"),trigger:"blur"}],enabled:[{required:!0,message:o("user.validation.statusRequired"),trigger:"blur"}],phone_number:[{required:!0,message:o("user.validation.phoneNumberRequired"),trigger:"blur"},{validator:(N,c,v)=>{if(!c)return v();const d=M(c)||"";return/^\+\d{10,15}$/.test(d)?v():v(new Error(o("user.validation.phoneNumberFormat")))},trigger:"blur"}],email:[{required:!0,message:o("user.validation.emailRequired"),trigger:"blur"},{type:"email",message:o("user.validation.emailInvalid"),trigger:"blur"}],employee_number:[{required:!1,validator:(N,c,v)=>{if(c&&!/^[A-Za-z0-9_-]+$/.test(c))return v(new Error(o("user.validation.employeeNumberFormat")));v()},trigger:"blur"}]},s=[{required:!0,message:o("user.validation.passwordRequired"),trigger:"blur"},{validator:(N,c,v)=>{const d=[];c.length<8&&d.push(o("user.validation.passwordMinLength")),/[A-Z]/.test(c)||d.push(o("user.validation.passwordUppercase")),/[a-z]/.test(c)||d.push(o("user.validation.passwordLowercase")),/[0-9]/.test(c)||d.push(o("user.validation.passwordNumber")),/[^A-Za-z0-9]/.test(c)||d.push(o("user.validation.passwordSpecialChar")),v(d.length>0?new Error(d.join(" ")):void 0)},trigger:"blur"}],g=[{required:!0,message:o("user.validation.confirmPasswordRequired"),trigger:"blur"},{validator:(N,c,v)=>{c!==t.value.newPassword?v(new Error(o("user.validation.passwordMismatch"))):v()},trigger:"blur"}];return t.value.id||(r.newPassword=s,r.confirmPassword=g),t.value.id&&I.value&&(r.newPassword=s,r.confirmPassword=g),r});function se(r,s){switch(r){case"toBeUploadImageList":b.value=[...s];break;case"toBeRemoveImageList":U.value=[...s];break}}const M=r=>{if(!r)return r;const s=String(r).replace(/\D/g,"");return s?`+${s}`:null},Y=r=>({first_name:r.first_name,last_name:r.last_name,email:r.email,phone_number:M(r.phone_number),password:r.confirmPassword,employee_number:r.employee_number,department_id:r.department_id,role_list:r.role_list,enabled:r.enabled,image:r.image}),Z=(r,s)=>{const g={};r.first_name!==s.first_name&&(g.first_name=r.first_name),r.last_name!==s.last_name&&(g.last_name=r.last_name),r.email!==s.email&&(g.email=r.email);const N=M(r.phone_number)||"",c=M(s.phone_number)||"";return N!==c&&(g.phone_number=N),r.confirmPassword&&(g.password=r.confirmPassword),r.employee_number!==s.employee_number&&(g.employee_number=r.employee_number),r.department_id!==s.department_id&&(g.department_id=r.department_id),JSON.stringify(r.role_list||[])!==JSON.stringify((s.roles||[]).map(d=>d.id))&&(g.role_list=r.role_list),r.enabled!==s.enabled&&(g.enabled=r.enabled),r.image!==s.image&&(g.image=r.image),g};async function de(){var g,N,c;const r=await _.value.validate();let s=null;if(!r)return O.error(o("user.message.pleaseCorrectErrors"));u.value=!0,P("update:loading",!0);try{try{if(b.value.length>0){const ce=((g=(await te(b.value)).data.uploadedFiles)==null?void 0:g.map(fe=>fe.url))||[];t.value.image=ce[0]||null}else t.value.image=null}catch{O.error("Image file upload failed")}const v=t.value.id!=null?Z(t.value,R.value):Y(t.value);if(t.value.id!=null)await $(t.value.id,v);else{const d=await ee(v);s=(N=d==null?void 0:d.data)==null?void 0:N.username}try{((c=U.value)==null?void 0:c.length)>0&&(await ae({bucketName:"sv-file-bucket",objectUrls:U.value})).status===0&&O.success("Old files deleted successfully!")}catch(d){console.log(d),O.error("Image file delete failed")}J(),s?P("confirm",s):(O.success(o("user.message.userUpdatedSuccess")),P("confirm"))}catch(v){console.error("Error submitting user form:",v),O.error(o("user.message.userUpdatedFailed"))}finally{u.value=!1,P("update:loading",!1)}}async function me(){try{await re.confirm(o("common.confirmMessage",o("common.warning"),{type:"warning",confirmButtonText:o("common.confirm"),cancelButtonText:o("common.cancel"),distinguishCancelAndClose:!0})),R.value===null?t.value=q():t.value=JSON.parse(JSON.stringify(R.value)),J(),_.value.clearValidate()}catch{}}function J(){b.value=[],U.value=[],f.value.clearExistingFromNewLists(),f.value.resetNewFileLists()}const ue=z(()=>{var s,g;if(!t.value.id||!R.value)return!0;const r=Z(t.value,R.value);return((s=b.value)==null?void 0:s.length)>0||((g=U.value)==null?void 0:g.length)>0?!0:Object.keys(r).length>0}),G={prop:e,t:o,emit:P,formRef:_,userFormImageUploadRef:f,showCertForm:y,editingCert:n,toBeUploadImageList:b,toBeRemoveImageList:U,changePassword:I,submitting:u,internalUser:t,originalUserSnapshot:R,createEmptyUser:q,transformIncomingUser:S,handleEditCert:E,handleAddCert:T,handleDeleteCert:ie,handleCertFormSave:oe,userFormValidationRules:ne,handleFileUpdate:se,toE164:M,buildCreateUserPayload:Y,buildUpdateUserPayload:Z,handleConfirm:de,handleResetForm:me,clearFileUploadComponent:J,isUserEdited:ue,CertificateFormDialog:Ve,CertificateList:qe,FileUploadMultiple:le,get VueTelInput(){return ve},computed:z,nextTick:H,ref:V,watch:A,get ElMessage(){return O},get ElMessageBox(){return re},get createUser(){return ee},get updateUserByAdmin(){return $},get deleteObjectList(){return ae},get uploadMultipleToMinio(){return te},get useI18n(){return D}};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}},Be={class:"form-row"},Ae={class:"form-row"},De={class:"form-row"},Me={class:"form-row"},je={class:"form-row"},ze={key:0,class:"form-row"},Te={class:"form-row"},Ze={class:"form-row"},Je={class:"form-action-row"};function He(F,a,k,e,o,P){const _=h("el-input"),f=h("el-form-item"),y=h("el-tag"),n=h("el-option"),b=h("el-select"),U=h("el-checkbox"),I=h("el-form"),u=h("el-button");return C(),L(j,null,[l(I,{ref:"formRef",model:e.internalUser,rules:e.userFormValidationRules,"label-width":"140",class:"two-col-form","validate-on-rule-change":!1},{default:i(()=>[p("div",Be,[l(f,{label:e.t("user.firstName"),prop:"first_name"},{default:i(()=>[l(_,{modelValue:e.internalUser.first_name,"onUpdate:modelValue":a[0]||(a[0]=t=>e.internalUser.first_name=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(f,{label:e.t("user.lastName"),prop:"last_name"},{default:i(()=>[l(_,{modelValue:e.internalUser.last_name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.internalUser.last_name=t)},null,8,["modelValue"])]),_:1},8,["label"])]),p("div",Ae,[l(f,{label:e.t("user.department"),prop:"department_id"},{default:i(()=>[l(b,{modelValue:e.internalUser.department_id,"onUpdate:modelValue":a[2]||(a[2]=t=>e.internalUser.department_id=t),placeholder:e.t("user.form.selectDepartmentPlaceHolder"),filterable:""},{default:i(()=>[(C(!0),L(j,null,K(e.prop.departmentOptions,t=>(C(),B(n,{key:t.id,label:t.name,value:t.id},{default:i(()=>[l(y,{type:t.el_tag_type},{default:i(()=>[x(w(t.name),1)]),_:2},1032,["type"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:e.t("user.form.role"),prop:"role_list"},{default:i(()=>[l(b,{modelValue:e.internalUser.role_list,"onUpdate:modelValue":a[3]||(a[3]=t=>e.internalUser.role_list=t),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":2,placeholder:e.t("user.form.selectRolePlaceHolder"),filterable:""},{default:i(()=>[(C(!0),L(j,null,K(e.prop.roleOptions,t=>(C(),B(n,{key:t.id,label:t.name,value:t.id},{default:i(()=>[l(y,{type:t.el_tag_type},{default:i(()=>[x(w(t.name),1)]),_:2},1032,["type"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",De,[m(`            <el-form-item :label="t('user.form.username')" prop="username">`),m('              <el-input v-model="internalUser.username" />'),m("            </el-form-item>"),l(f,{label:e.t("user.employeeNumber"),prop:"employee_number"},{default:i(()=>[l(_,{modelValue:e.internalUser.employee_number,"onUpdate:modelValue":a[4]||(a[4]=t=>e.internalUser.employee_number=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(f,{label:e.t("user.form.status"),prop:"enabled"},{default:i(()=>[l(b,{modelValue:e.internalUser.enabled,"onUpdate:modelValue":a[5]||(a[5]=t=>e.internalUser.enabled=t),placeholder:e.t("user.form.status")},{default:i(()=>[l(n,{label:e.t("user.status.active"),value:!0},null,8,["label"]),l(n,{label:e.t("user.status.inactive"),value:!1},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",Me,[l(f,{label:e.t("user.form.email"),prop:"email"},{default:i(()=>[l(_,{modelValue:e.internalUser.email,"onUpdate:modelValue":a[6]||(a[6]=t=>e.internalUser.email=t)},null,8,["modelValue"])]),_:1},8,["label"]),m(`            <el-form-item :label="t('user.form.phoneNumber')" prop="phone_number">`),m("              <el-input"),m('                  v-model="internalUser.phone_number"'),m('                  placeholder="+15551234567"'),m("                  clearable"),m("              >"),m("                <template #prepend>+</template>"),m("              </el-input>"),m("            </el-form-item>"),l(f,{label:e.t("user.form.phoneNumber"),prop:"phone_number"},{default:i(()=>[l(e.VueTelInput,{modelValue:e.internalUser.phone_number,"onUpdate:modelValue":a[7]||(a[7]=t=>e.internalUser.phone_number=t),placeholder:e.t("user.form.phoneNumber"),mode:"international","default-country":"CA","valid-character-only":!0,"input-options":{showDialCode:!0,maxlength:20}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),m(" Commented for now as this is not supported in user service yet  "),m("          <el-divider>"),m("            {{ t('team.team') }}"),m("          </el-divider>"),m(`          <el-form-item :label="t('user.assignedTeam')" prop="teams">`),m('            <associated-team-select v-model="internalUser.teams" />'),m("          </el-form-item>"),m("          <el-divider>"),m("            {{ t('user.certificate') }}"),m("          </el-divider>"),l(f,{label:e.t("user.certificate"),prop:"certificates"},{default:i(()=>[l(e.CertificateList,{certificates:e.internalUser.certificates,onEdit:e.handleEditCert,onDelete:e.handleDeleteCert,onAdd:e.handleAddCert},null,8,["certificates"])]),_:1},8,["label"]),p("div",je,[l(e.FileUploadMultiple,{ref:"userFormImageUploadRef","image-label":e.t("user.table.profileImage"),"onUpdate:imageList":a[8]||(a[8]=t=>e.handleFileUpdate("toBeUploadImageList",t)),"onUpdate:removedExistingImages":a[9]||(a[9]=t=>e.handleFileUpdate("toBeRemoveImageList",t)),"upload-type":"images","max-images":1,existingImageList:e.internalUser.image?[e.internalUser.image]:[],"title-label-position":"right"},null,8,["image-label","existingImageList"])]),m(" Show only for new user "),e.internalUser.id==null?(C(),L("div",ze,[l(f,{label:e.t("user.form.newPassword"),prop:"newPassword"},{default:i(()=>[l(_,{modelValue:e.internalUser.newPassword,"onUpdate:modelValue":a[10]||(a[10]=t=>e.internalUser.newPassword=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),l(f,{label:e.t("user.form.confirmPassword"),prop:"confirmPassword"},{default:i(()=>[l(_,{modelValue:e.internalUser.confirmPassword,"onUpdate:modelValue":a[11]||(a[11]=t=>e.internalUser.confirmPassword=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"])])):(C(),L(j,{key:1},[m(" Show only for editing existing user "),p("div",Te,[l(f,null,{default:i(()=>[l(U,{modelValue:e.changePassword,"onUpdate:modelValue":a[12]||(a[12]=t=>e.changePassword=t)},{default:i(()=>[x(w(e.t("user.form.changePassword")),1)]),_:1},8,["modelValue"])]),_:1})]),p("div",Ze,[e.changePassword?(C(),B(f,{key:0,label:e.t("user.form.newPassword"),prop:"newPassword"},{default:i(()=>[l(_,{modelValue:e.internalUser.newPassword,"onUpdate:modelValue":a[13]||(a[13]=t=>e.internalUser.newPassword=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"])):m("v-if",!0),e.changePassword?(C(),B(f,{key:1,label:e.t("user.form.confirmPassword"),prop:"confirmPassword"},{default:i(()=>[l(_,{modelValue:e.internalUser.confirmPassword,"onUpdate:modelValue":a[14]||(a[14]=t=>e.internalUser.confirmPassword=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1},8,["label"])):m("v-if",!0)])],64))]),_:1},8,["model","rules"]),p("div",Je,[l(u,{onClick:a[15]||(a[15]=t=>e.emit("cancel"))},{default:i(()=>[x(w(e.t("user.form.cancelButton")),1)]),_:1}),l(u,{type:"warning",onClick:e.handleResetForm},{default:i(()=>[x(w(e.t("workOrder.actions.reset")),1)]),_:1}),l(u,{type:"primary",disabled:e.internalUser.id&&!e.isUserEdited,onClick:e.handleConfirm},{default:i(()=>[x(w(e.t("user.form.confirmButton")),1)]),_:1},8,["disabled"])]),m(" Certificate Form Dialog "),l(e.CertificateFormDialog,{visible:e.showCertForm,certificate:e.editingCert,onSave:e.handleCertFormSave,onClose:a[16]||(a[16]=t=>e.showCertForm=!1)},null,8,["visible","certificate"])],64)}const rt=Q(Oe,[["render",He],["__scopeId","data-v-c690f4c4"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/user/components/UserForm.vue"]]);export{rt as U};
