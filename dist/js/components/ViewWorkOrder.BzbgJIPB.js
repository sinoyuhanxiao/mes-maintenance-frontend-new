import"../vue/vue.Dfo81L2Q.js";import{u as Q}from"../vue-router/vue-router.30cuaQZO.js";import{k as X}from"../work-order/work-order.CtSeOWtO.js";import{c as ie}from"../datetime/datetime.39-ZCqKU.js";import{c as re,_ as oe}from"../../assets/index-fCswSekQ.js";import{u as Z}from"../commonData/commonData.BC1BHJWB.js";import{a as G,b as j,c as Y}from"../equipment/equipment.DNKw76bx.js";import{B as ae,ac as de}from"../@element-plus/@element-plus.BNeHluFm.js";import{am as p,c,o as r,S as a,L as i,a as d,F as q,a8 as W,K as u,Q as I,r as _,j as N,w,R as y,O as E,V as ne,q as $,t as ee}from"../@vue/@vue.CVGyaoMH.js";import{E as te}from"../element-plus/element-plus.CU5xiOkY.js";import"../pinia/pinia.CzPcBe5J.js";import"../vue-demi/vue-demi.-dVQ4Px2.js";import"../js-cookie/js-cookie.Cz0CWeBA.js";import"../geotiff/geotiff.Dp1pzeXC.js";import"../path-to-regexp/path-to-regexp.i8-bKtXe.js";import"../fuse.js/fuse.js.BiDyM4rQ.js";import"../path-browserify/path-browserify.DkEToxTs.js";import"../screenfull/screenfull.DmVOzVZz.js";import"../vue-i18n/vue-i18n.DjO1PVT4.js";import"../@intlify/@intlify.BhOIvmlS.js";import"../mitt/mitt.DJ65BbbF.js";import"../lodash-es/lodash-es.BLHqGvLj.js";import"../@vueuse/@vueuse.B5lT-MN9.js";import"../axios/axios.Dq7h7Pqt.js";import"../nprogress/nprogress._Z8YfKSV.js";/* empty css                                 */import"../clipboard/clipboard.DAe4Lk7l.js";import"../vue3-lottie/vue3-lottie.DS19j_I8.js";import"../lottie-web/lottie-web.fKmgUVyQ.js";import"../@popperjs/@popperjs.D_chPuIy.js";import"../@ctrl/@ctrl.r5W6hzzQ.js";import"../dayjs/dayjs.C0sY0_St.js";import"../async-validator/async-validator.D3FX-SGt.js";import"../memoize-one/memoize-one.BdPwpGay.js";import"../normalize-wheel-es/normalize-wheel-es.BQoi3Ox2.js";import"../@floating-ui/@floating-ui.85_40PfK.js";import"../common/common.CHi731XS.js";function le(M,l){const V=re(),e=V.visitedViews.find(h=>h.path===M.fullPath);e&&(e.title=l,V.UPDATE_VISITED_VIEW(e))}const se={__name:"ImagesAndFiles",props:{mode:{type:String,required:!0},imageListUrl:{type:Array,default:()=>[]},fileListUrl:{type:Array,default:()=>[]},imageListMultipartAdded:{type:Array,default:()=>[]},fileListMultipartAdded:{type:Array,default:()=>[]},imageListUrlDeleted:{type:Array,default:()=>[]},fileListUrlDeleted:{type:Array,default:()=>[]}},emits:["update:imageListMultipartAdded","update:fileListMultipartAdded","update:imageListUrlDeleted","update:fileListUrlDeleted"],setup(M,{expose:l,emit:V}){l();const e=M,h=V,S=_([]),C=_([]),T=_(!1),m=_(""),P=g=>{m.value=g.url,T.value=!0},b=(g,t)=>{S.value=t;const n=t.map(A=>A.raw).filter(A=>A instanceof File);h("update:imageListMultipartAdded",n)},D=(g,t)=>{C.value=t;const n=t.map(A=>A.raw).filter(A=>A instanceof File);h("update:fileListMultipartAdded",n)},v=g=>{h("update:imageListUrlDeleted",[...e.imageListUrlDeleted,g.url])},k=g=>{h("update:fileListUrlDeleted",[...e.fileListUrlDeleted,g.url])},O=g=>g.split("/").pop(),U=N(()=>e.imageListUrl),x=N(()=>e.fileListUrl);w([()=>e.mode,()=>e.imageListUrl,()=>e.fileListUrl,()=>e.imageListMultipartAdded,()=>e.fileListMultipartAdded,()=>e.imageListUrlDeleted,()=>e.fileListUrlDeleted],([g,t,n,A,J,R,z])=>{},{deep:!0,immediate:!0}),w([()=>e.imageListUrl,()=>e.mode],([g,t])=>{t==="edit"&&(S.value=g.map(n=>({name:O(n),url:n})))},{immediate:!0}),w([()=>e.fileListUrl,()=>e.mode],([g,t])=>{t==="edit"&&(C.value=g.map(n=>({name:O(n),url:n})))},{immediate:!0});const F={props:e,emit:h,imageFileList:S,fileFileList:C,dialogVisible:T,dialogImageUrl:m,handlePictureCardPreview:P,handleImageChange:b,handleFileChange:D,handleImageRemove:v,handleFileRemove:k,getFileName:O,imageListUrlComputed:U,fileListUrlComputed:x,ref:_,computed:N,watch:w,get Plus(){return ae}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},me={class:"el-col el-col-24 is-guttered card-container"},ce={class:"el-card__body"},ue={class:"image-list"},_e={class:"image-wrapper"},pe=["src"],ge={class:"file-list"};function fe(M,l,V,e,h,S){const C=p("el-image"),T=p("el-icon"),m=p("el-upload"),P=p("el-dialog"),b=p("el-descriptions-item"),D=p("el-link"),v=p("el-button"),k=p("el-descriptions"),O=p("el-card");return r(),c("div",me,[a(O,{class:"card-shadow"},{default:i(()=>[l[2]||(l[2]=d("div",{class:"el-card__header"},[d("div",{class:"card-header"},[d("span",null,"Attachment Information")])],-1)),d("div",ce,[a(k,{border:"",column:1},{default:i(()=>[a(b,{label:"Image Preview"},{default:i(()=>[d("div",ue,[V.mode==="view"?(r(!0),c(q,{key:0},W(e.imageListUrlComputed,(U,x)=>(r(),u(C,{key:x,src:U,style:{width:"100px",height:"100px","margin-right":"10px"},fit:"cover","preview-src-list":e.imageListUrlComputed},null,8,["src","preview-src-list"]))),128)):(r(),c(q,{key:1},[a(m,{action:"#","list-type":"picture-card","auto-upload":!1,"file-list":e.imageFileList,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleImageRemove,"on-change":e.handleImageChange,accept:"image/*"},{default:i(()=>[a(T,null,{default:i(()=>[a(e.Plus)]),_:1})]),_:1},8,["file-list"]),a(P,{fullscreen:"",modelValue:e.dialogVisible,"onUpdate:modelValue":l[0]||(l[0]=U=>e.dialogVisible=U),"append-to-body":""},{default:i(()=>[d("div",_e,[d("img",{src:e.dialogImageUrl,alt:"Preview Image"},null,8,pe)])]),_:1},8,["modelValue"])],64))])]),_:1}),a(b,{label:"File Download"},{default:i(()=>[d("div",ge,[V.mode==="view"?(r(!0),c(q,{key:0},W(e.fileListUrlComputed,(U,x)=>(r(),c("div",{key:x,style:{"margin-bottom":"8px"}},[a(D,{href:U,target:"_blank",type:"primary"},{default:i(()=>[I(y(e.getFileName(U)),1)]),_:2},1032,["href"])]))),128)):(r(),u(m,{key:1,action:"#","list-type":"text","auto-upload":!1,"file-list":e.fileFileList,"on-remove":e.handleFileRemove,"on-change":e.handleFileChange,accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,.csv,.json,.xml,.ppt,.pptx"},{default:i(()=>[a(v,{size:"small",type:"success"},{default:i(()=>l[1]||(l[1]=[I("Click to Upload")])),_:1,__:[1]})]),_:1},8,["file-list"]))])]),_:1})]),_:1})])]),_:1,__:[2]})])}const ye=oe(se,[["render",fe],["__scopeId","data-v-d2e60013"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/workOrder/components/ImagesAndFiles.vue"]]),ve={__name:"ViewWorkOrder",setup(M,{expose:l}){const V=Q(),e=_({estimated_minutes:0,priority:{},category:{},work_type:{},production_line:{},equipment_group:{},equipment:{},component:{},image_list:[],file_list:[]}),h=_({}),S=_({}),C=_(!0),T=_("100"),m=_(!1),P=_(null),b=Z(),D=N(()=>{const o=e.value.work_order_progress;return!o||!o.total_task_amount?0:Math.round(o.completed_task_amount/o.total_task_amount*100)}),v=_([]),k=_([]),O=_([]),U=_([]),x=_([]),F=_([]),g=_([]),t=_(["Sample comment 1","Sample comment 2"]),n=_(""),A=()=>{n.value.trim()&&(t.value.push(n.value.trim()),n.value="")},J=o=>{navigator.clipboard.writeText(o).then(()=>{te.success("Copied to clipboard")})};$(async()=>{const o=V.params.id,s=(await X(o)).data;await b.fetchPriorities(),await b.fetchWorkTypes(),await b.fetchCategories(),h.value=JSON.parse(JSON.stringify(e.value)),e.value={id:s.id,code:s.code,name:s.name,description:s.description,halt_type:s.halt_type,estimated_minutes:s.estimated_minutes||0,priority:s.priority||{},category:s.category||{},work_type:s.work_type||{},production_line:s.production_line||{},equipment_group:s.equipment_group||{},equipment:s.equipment||{},component:s.component||{},image_list:s.image_list||[],file_list:s.file_list||[],start_date:s.start_date,end_date:s.end_date,due_date:s.due_date,state_id:s.state_id,recurrence_type:s.recurrence_type||{},work_order_progress:s.work_order_progress||{},created_by:s.created_by,created_at:s.created_at,approved_by_id:s.approved_by_id},C.value=!1;const L=e.value.name.length>5?`${e.value.name.slice(0,5)}...`:e.value.name;le(V,`Work Order #${e.value.id} - ${L}`)});function R(){var f,s;const o={};for(const L in e.value)if(typeof e.value[L]=="object"&&e.value[L]!==null)if("id"in e.value[L]){const K=(f=h.value[L])==null?void 0:f.id,B=(s=e.value[L])==null?void 0:s.id;K!==B&&(o[L+"_id"]=B)}else Array.isArray(e.value[L]);else e.value[L]!==h.value[L]&&(o[L]=e.value[L]);o.updated_by=37,o.updated_at=new Date().toISOString(),delete o.created_by,delete o.created_at,S.value=o}function z(){ee(()=>{const o=document.querySelectorAll(".el-input__wrapper, .el-textarea__inner, .el-select__wrapper");o.forEach(f=>{f.classList.add("highlight-border")}),setTimeout(()=>{o.forEach(f=>{f.classList.remove("highlight-border")})},1500)})}w(m,o=>{o&&z()}),w(e,o=>{},{deep:!0}),w(()=>{var o;return(o=e.value.production_line)==null?void 0:o.id},async o=>{if(o){const{data:f}=await G(o);v.value=f.data}}),w(()=>{var o;return(o=e.value.equipment_group)==null?void 0:o.id},async o=>{if(o){const{data:f}=await j(o);k.value=f.data}}),w(()=>{var o;return(o=e.value.equipment)==null?void 0:o.id},async o=>{if(o){const{data:f}=await Y(o);O.value=f.data}}),w(m,o=>{o||R()}),w([U,x,F,g,()=>e.value.image_list,()=>e.value.file_list,m],([o,f,s,L,K,B,Je])=>{},{deep:!0}),w(()=>{var o;return(o=e.value.production_line)==null?void 0:o.id},async o=>{if(o){const{data:f}=await G(o);v.value=f.data}e.value.equipment_group.id=null,e.value.equipment.id=null,e.value.component.id=null}),w(()=>{var o;return(o=e.value.equipment_group)==null?void 0:o.id},async o=>{if(o){const{data:f}=await j(o);k.value=f.data}e.value.equipment.id=null,e.value.component.id=null}),w(()=>{var o;return(o=e.value.equipment)==null?void 0:o.id},async o=>{if(o){const{data:f}=await Y(o);O.value=f.data}e.value.component.id=null}),l({workOrderExpose:{id:e.value.id,name:e.value.name}});const H={route:V,workOrder:e,originalWorkOrder:h,updatedWorkOrder:S,loading:C,labelWidth:T,editing:m,nameInputRef:P,commonDataStore:b,taskProgress:D,equipmentGroups:v,equipments:k,components:O,imageListMultipartAdded:U,fileListMultipartAdded:x,imageListUrlDeleted:F,fileListUrlDeleted:g,comments:t,newComment:n,addComment:A,copyToClipboard:J,calculateUpdatedWorkOrder:R,highlightAllInputs:z,onMounted:$,ref:_,computed:N,watch:w,nextTick:ee,get useRoute(){return Q},get getWorkOrderById(){return X},get convertToLocalTime(){return ie},get updateTabTitle(){return le},get useCommonDataStore(){return Z},get getEquipmentGroups(){return G},get getEquipments(){return j},get getEquipmentComponents(){return Y},ImagesAndFiles:ye,get CopyDocument(){return de},get ElMessage(){return te}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}},ke={key:0,class:"el-row card-row"},we={class:"el-col el-col-24 is-guttered card-container"},he={class:"el-card__header"},be={class:"card-header"},Le={class:"workorder-id"},Oe={class:"el-card__body"},Ue={style:{display:"flex","align-items":"center"}},Ve={style:{display:"flex","align-items":"center"}},Ce={key:1},xe={key:1},qe={class:"el-col el-col-24 is-guttered card-container"},De={class:"el-card__body"},Ae={key:1},We={key:1},Ie={key:1},Te={key:1},Se={class:"el-col el-col-24 is-guttered card-container"},Ee={class:"el-card__body"},Pe={class:"el-col el-col-24 is-guttered"},Fe={class:"el-col el-col-24 is-guttered card-container"},Me={class:"el-card__body progress-body"},Ne={class:"progress-left"},Re={class:"progress-text"},ze={class:"el-col el-col-24 is-guttered card-container"},Be={class:"el-card__body"},Ge={style:{"text-align":"right"}},je={key:1};function Ye(M,l,V,e,h,S){const C=p("el-input"),T=p("el-icon"),m=p("el-descriptions-item"),P=p("el-switch"),b=p("el-descriptions"),D=p("el-card"),v=p("el-option"),k=p("el-select"),O=p("el-tag"),U=p("el-progress"),x=p("el-button"),F=p("el-skeleton"),g=p("el-tooltip");return r(),c("div",null,[e.loading?(r(),c("div",je,[a(F,{rows:8,animated:""}),E(" optional skeleton UI ")])):(r(),c("div",ke,[E(" 基本信息卡片 "),d("div",we,[a(D,{class:"card-shadow"},{default:i(()=>[d("div",he,[d("div",be,[l[18]||(l[18]=d("span",null,"Work Order Basic Information",-1)),d("span",Le,"#"+y(e.workOrder.id),1)])]),d("div",Oe,[a(b,{border:"",column:2},{default:i(()=>[a(m,{label:"Work Order Name",width:e.labelWidth,span:1},{default:i(()=>[d("div",Ue,[e.editing?(r(),u(C,{key:0,modelValue:e.workOrder.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.workOrder.name=t),ref:"nameInputRef",size:"default"},null,8,["modelValue"])):(r(),c(q,{key:1},[d("span",null,y(e.workOrder.name),1),a(T,{style:{cursor:"pointer","margin-left":"8px",color:"var(--el-color-primary)"},onClick:l[1]||(l[1]=t=>e.copyToClipboard(e.workOrder.name))},{default:i(()=>[a(e.CopyDocument)]),_:1})],64))])]),_:1},8,["width"]),a(m,{label:"Work Order Number",width:e.labelWidth,span:1},{default:i(()=>[d("div",Ve,[d("span",null,y(e.workOrder.code),1),a(T,{style:{cursor:"pointer","margin-left":"8px",color:"var(--el-color-primary)"},onClick:l[2]||(l[2]=t=>e.copyToClipboard(e.workOrder.code))},{default:i(()=>[a(e.CopyDocument)]),_:1})])]),_:1},8,["width"]),a(m,{label:"Halt",width:e.labelWidth,span:2},{default:i(()=>[e.editing?(r(),u(P,{key:0,modelValue:e.workOrder.halt_type,"onUpdate:modelValue":l[3]||(l[3]=t=>e.workOrder.halt_type=t),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])):(r(),c("span",Ce,y(e.workOrder.halt_type===1?"Yes":"No"),1))]),_:1},8,["width"]),a(m,{label:"Description",width:e.labelWidth,span:2},{default:i(()=>[e.editing?(r(),u(C,{key:0,modelValue:e.workOrder.description,"onUpdate:modelValue":l[4]||(l[4]=t=>e.workOrder.description=t),type:"textarea"},null,8,["modelValue"])):(r(),c("span",xe,y(e.workOrder.description),1))]),_:1},8,["width"])]),_:1})])]),_:1})]),E(" 资产信息卡片 "),d("div",qe,[a(D,{class:"card-shadow"},{default:i(()=>[l[19]||(l[19]=d("div",{class:"el-card__header"},[d("div",{class:"card-header"},[d("span",null,"Equipment & Asset Information")])],-1)),d("div",De,[a(b,{border:"",column:2},{default:i(()=>[a(m,{label:"Production Line",width:e.labelWidth},{default:i(()=>{var t;return[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.production_line.id,"onUpdate:modelValue":l[5]||(l[5]=n=>e.workOrder.production_line.id=n),placeholder:"Production Line"},{default:i(()=>[(r(!0),c(q,null,W(e.commonDataStore.productionLines,n=>(r(),u(v,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),c("span",Ae,y((t=e.workOrder.production_line)==null?void 0:t.name),1))]}),_:1},8,["width"]),a(m,{label:"Equipment Group",width:e.labelWidth},{default:i(()=>{var t;return[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.equipment_group.id,"onUpdate:modelValue":l[6]||(l[6]=n=>e.workOrder.equipment_group.id=n),placeholder:"Equipment Group"},{default:i(()=>[(r(!0),c(q,null,W(e.equipmentGroups,n=>(r(),u(v,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),c("span",We,y((t=e.workOrder.equipment_group)==null?void 0:t.name),1))]}),_:1},8,["width"]),a(m,{label:"Equipment",width:e.labelWidth},{default:i(()=>{var t;return[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.equipment.id,"onUpdate:modelValue":l[7]||(l[7]=n=>e.workOrder.equipment.id=n),placeholder:"Equipment"},{default:i(()=>[(r(!0),c(q,null,W(e.equipments,n=>(r(),u(v,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),c("span",Ie,y((t=e.workOrder.equipment)==null?void 0:t.name),1))]}),_:1},8,["width"]),a(m,{label:"Component",width:e.labelWidth},{default:i(()=>{var t;return[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.component.id,"onUpdate:modelValue":l[8]||(l[8]=n=>e.workOrder.component.id=n),placeholder:"Component"},{default:i(()=>[(r(!0),c(q,null,W(e.components,n=>(r(),u(v,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),c("span",Te,y((t=e.workOrder.component)==null?void 0:t.name),1))]}),_:1},8,["width"])]),_:1})])]),_:1,__:[19]})]),E(" 分类信息卡片 "),d("div",Se,[a(D,{class:"card-shadow"},{default:i(()=>[l[20]||(l[20]=d("div",{class:"el-card__header"},[d("div",{class:"card-header"},[d("span",null,"Classification Information")])],-1)),d("div",Ee,[a(b,{border:"",column:2},{default:i(()=>[a(m,{label:"Priority",width:e.labelWidth},{default:i(()=>[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.priority.id,"onUpdate:modelValue":l[9]||(l[9]=t=>e.workOrder.priority.id=t),placeholder:"Priority",style:{width:"100%"}},{default:i(()=>[(r(!0),c(q,null,W(e.commonDataStore.priorities,t=>(r(),u(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),u(O,{key:1,type:"danger"},{default:i(()=>{var t;return[I(y((t=e.workOrder.priority)==null?void 0:t.name),1)]}),_:1}))]),_:1},8,["width"]),a(m,{label:"Work Order Category",width:e.labelWidth},{default:i(()=>[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.category.id,"onUpdate:modelValue":l[10]||(l[10]=t=>e.workOrder.category.id=t),placeholder:"Work Order Category",style:{width:"100%"}},{default:i(()=>[(r(!0),c(q,null,W(e.commonDataStore.categories,t=>(r(),u(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),u(O,{key:1},{default:i(()=>{var t;return[I(y((t=e.workOrder.category)==null?void 0:t.name),1)]}),_:1}))]),_:1},8,["width"]),a(m,{label:"Work Type",width:e.labelWidth},{default:i(()=>[e.editing?(r(),u(k,{key:0,modelValue:e.workOrder.work_type.id,"onUpdate:modelValue":l[11]||(l[11]=t=>e.workOrder.work_type.id=t),placeholder:"Work Type",style:{width:"100%"}},{default:i(()=>[(r(!0),c(q,null,W(e.commonDataStore.workTypes,t=>(r(),u(v,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(r(),u(O,{key:1,type:"success"},{default:i(()=>{var t;return[I(y((t=e.workOrder.work_type)==null?void 0:t.name),1)]}),_:1}))]),_:1},8,["width"])]),_:1})])]),_:1,__:[20]})]),E(" 附件信息Common卡片 "),d("div",Pe,[a(e.ImagesAndFiles,{mode:e.editing?"edit":"view",imageListUrl:e.workOrder.image_list,fileListUrl:e.workOrder.file_list,image_list_multipart_added:e.imageListMultipartAdded,"onUpdate:image_list_multipart_added":l[12]||(l[12]=t=>e.imageListMultipartAdded=t),file_list_multipart_added:e.fileListMultipartAdded,"onUpdate:file_list_multipart_added":l[13]||(l[13]=t=>e.fileListMultipartAdded=t),image_list_url_deleted:e.imageListUrlDeleted,"onUpdate:image_list_url_deleted":l[14]||(l[14]=t=>e.imageListUrlDeleted=t),file_list_url_deleted:e.fileListUrlDeleted,"onUpdate:file_list_url_deleted":l[15]||(l[15]=t=>e.fileListUrlDeleted=t)},null,8,["mode","imageListUrl","fileListUrl","image_list_multipart_added","file_list_multipart_added","image_list_url_deleted","file_list_url_deleted"])]),E(" 任务进度卡片11 "),d("div",Fe,[a(D,{class:"card-shadow"},{default:i(()=>[l[22]||(l[22]=d("div",{class:"el-card__header"},[d("div",{class:"card-header"},[d("span",null,"Task Progress")])],-1)),d("div",Me,[d("div",Ne,[a(U,{type:"circle",percentage:e.taskProgress,"stroke-width":8,status:"success"},null,8,["percentage"]),d("div",Re," Completed "+y(e.workOrder.work_order_progress.completed_task_amount||0)+" / "+y(e.workOrder.work_order_progress.total_task_amount||0),1)]),a(b,{border:"",column:1,class:"progress-descriptions"},{default:i(()=>[a(m,{label:"Start Time"},{default:i(()=>[I(y(e.convertToLocalTime(e.workOrder.start_date)),1)]),_:1}),a(m,{label:"End Time"},{default:i(()=>[I(y(e.convertToLocalTime(e.workOrder.end_date)),1)]),_:1}),a(m,{label:"Status"},{default:i(()=>l[21]||(l[21]=[I("In Progress")])),_:1,__:[21]})]),_:1})])]),_:1,__:[22]})]),E(" 评论卡片 "),d("div",ze,[a(D,{class:"card-shadow"},{default:i(()=>[l[25]||(l[25]=d("div",{class:"el-card__header"},[d("div",{class:"card-header"},[d("span",null,"Comments")])],-1)),d("div",Be,[a(C,{modelValue:e.newComment,"onUpdate:modelValue":l[16]||(l[16]=t=>e.newComment=t),placeholder:"Write a comment...",type:"textarea",autosize:{minRows:3,maxRows:5},style:{"margin-bottom":"10px"}},null,8,["modelValue"]),d("div",Ge,[a(x,{type:"primary",size:"default",onClick:e.addComment},{default:i(()=>l[23]||(l[23]=[I("Send")])),_:1,__:[23]})]),(r(!0),c(q,null,W(e.comments,(t,n)=>(r(),c("div",{key:n,style:{"margin-top":"15px"}},[l[24]||(l[24]=d("div",{style:{"font-weight":"bold"}},[I("Erik Yu "),d("span",{style:{color:"#999","font-size":"12px"}},"2:15 PM")],-1)),d("div",null,y(t),1)]))),128))])]),_:1,__:[25]})])])),a(g,{content:e.editing?"Save Changes":"Edit Work Order",placement:"top"},{default:i(()=>[a(x,{class:"floating-edit-button",type:e.editing?"success":"primary",circle:"",size:"large",icon:e.editing?"Check":"Edit",onClick:l[17]||(l[17]=t=>e.editing=!e.editing)},null,8,["type","icon"])]),_:1},8,["content"]),a(ne,{name:"slide-fade"},{default:i(()=>[e.editing?(r(),u(g,{key:0,content:"Delete Work Order",placement:"bottom"},{default:i(()=>[a(x,{class:"floating-delete-button",type:"danger",circle:"",size:"large",icon:"Delete"})]),_:1})):E("v-if",!0)]),_:1})])}const At=oe(ve,[["render",Ye],["__scopeId","data-v-c58fe4e4"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/workOrder/components/ViewWorkOrder.vue"]]);export{At as default};
