import"../vue/vue.Dfo81L2Q.js";import{_ as ye,d as ie}from"../../assets/index-fCswSekQ.js";import{a as qe,j as Ke,a6 as Qe,E as Ge,a2 as We,P as Ye,$ as Ze,B as Je,M as Xe,am as $e}from"../@element-plus/@element-plus.BNeHluFm.js";import{d as et,u as tt,c as at,g as lt,a as nt}from"../task-library/task-library.mnROmZvc.js";import{f as ce,E as g,c as ue}from"../element-plus/element-plus.CU5xiOkY.js";import{r as f,am as y,c as _,o as v,O as i,a as s,R as D,K as $,L as d,Q as x,G as Se,j as U,S as l,M as st,U as ot,F as Y,a8 as ae,E as dt,d as Ce,w as me,q as ve,Z as fe,t as ge,Y as rt,a6 as _e}from"../@vue/@vue.CVGyaoMH.js";import{C as it}from"../CreateStandardDialog/CreateStandardDialog.BThjHi_w.js";import{d as he}from"../lodash-es/lodash-es.BLHqGvLj.js";import"../pinia/pinia.CzPcBe5J.js";import"../vue-demi/vue-demi.-dVQ4Px2.js";import"../js-cookie/js-cookie.Cz0CWeBA.js";import"../geotiff/geotiff.Dp1pzeXC.js";import"../vue-router/vue-router.30cuaQZO.js";import"../path-to-regexp/path-to-regexp.i8-bKtXe.js";import"../fuse.js/fuse.js.BiDyM4rQ.js";import"../path-browserify/path-browserify.DkEToxTs.js";import"../screenfull/screenfull.DmVOzVZz.js";import"../vue-i18n/vue-i18n.DjO1PVT4.js";import"../@intlify/@intlify.BhOIvmlS.js";import"../mitt/mitt.DJ65BbbF.js";import"../@vueuse/@vueuse.B5lT-MN9.js";import"../axios/axios.Dq7h7Pqt.js";import"../nprogress/nprogress._Z8YfKSV.js";/* empty css                                 */import"../clipboard/clipboard.DAe4Lk7l.js";import"../vue3-lottie/vue3-lottie.DS19j_I8.js";import"../lottie-web/lottie-web.fKmgUVyQ.js";import"../@popperjs/@popperjs.D_chPuIy.js";import"../@ctrl/@ctrl.r5W6hzzQ.js";import"../dayjs/dayjs.C0sY0_St.js";import"../async-validator/async-validator.D3FX-SGt.js";import"../memoize-one/memoize-one.BdPwpGay.js";import"../normalize-wheel-es/normalize-wheel-es.BQoi3Ox2.js";import"../@floating-ui/@floating-ui.85_40PfK.js";function pe(){const H=f(!1),a=f([]),u=f(null),e=f({search:"",category:"",module:""}),S=f({currentPage:1,pageSize:20,total:0,totalPages:0}),p=async(o={})=>{H.value=!0;try{const t={};e.value.search&&(t.keyword=e.value.search),e.value.category&&(t.category=e.value.category);const r={page:S.value.currentPage,size:S.value.pageSize},{data:w}=await nt({...t,...o},r),{content:Q=[],totalElements:B=0,totalPages:G=0}=w;a.value=Q,S.value.total=B,S.value.totalPages=G}catch(t){g.error("Failed to load standards"),console.error("Failed to load standards:",t)}finally{H.value=!1}},m=async o=>{try{const r=(await lt(o)).data;return u.value=r,g.success("Standard loaded successfully"),r}catch(t){throw g.error("Failed to load standard"),console.error("Failed to load standard:",t),t}},k=async o=>{try{const r=(await at(o)).data;return a.value.push(r),ce({title:"Success",message:"Standard created successfully",type:"success"}),r}catch(t){throw g.error("Failed to create standard"),console.error("Failed to create standard:",t),t}},z=async(o,t)=>{try{const w=(await tt(o,t)).data,Q=a.value.findIndex(B=>F(B)===o);return Q!==-1&&(a.value[Q]=w),u.value&&F(u.value)===o&&(u.value=w),g.success("Standard updated successfully"),w}catch(r){throw g.error("Failed to update standard"),console.error("Failed to update standard:",r),r}},P=async o=>{try{await et(o);const t=a.value.findIndex(r=>F(r)===o);t!==-1&&a.value.splice(t,1),u.value&&F(u.value)===o&&(u.value=null),ce({title:"Success",message:"Standard deleted successfully",type:"success"})}catch(t){throw g.error("Failed to delete standard"),console.error("Failed to delete standard:",t),t}},A=(o,t)=>{e.value[o]=t,S.value.currentPage=1,p()},h=()=>{e.value={search:"",category:"",module:""},S.value.currentPage=1,p()},K=o=>{S.value.currentPage=o,p()},q=o=>{S.value.pageSize=o,S.value.currentPage=1,p()},N=o=>{u.value=o},T=()=>{u.value=null},F=o=>o.id||o._id,j=o=>a.value.find(t=>F(t)===o),M=o=>a.value.filter(t=>t.category===o),C=o=>a.value.filter(t=>t.module===o),V=o=>{const t=[];return(!o.name||o.name.trim().length===0)&&t.push("Standard name is required"),(!o.description||o.description.trim().length===0)&&t.push("Description is required"),(!o.items||o.items.length===0)&&t.push("Standard must have at least one item"),o.items&&o.items.forEach((r,w)=>{(!r||r.trim().length===0)&&t.push(`Rule ${w+1} cannot be empty`)}),t};return{loading:H,standards:a,currentstandard:u,filters:e,pagination:S,loadstandards:p,loadstandard:m,createStandard:k,updateStandard:z,deleteStandard:P,setFilter:A,clearFilters:h,setPage:K,setPageSize:q,selectstandard:N,clearSelection:T,getStandardId:F,getStandardById:j,getStandardsByCategory:M,getStandardsByModule:C,validatestandard:V,isstandardValid:o=>V(o).length===0}}const ct={__name:"StandardCard",props:{standard:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},emits:["select","edit","duplicate","delete"],setup(H,{expose:a,emit:u}){a();const e=H,S=u,p=U(()=>{var k,z;return((z=(k=e.standard)==null?void 0:k.items)==null?void 0:z.length)||0}),m={props:e,emit:S,rulesCount:p,computed:U};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},ut={class:"card-content"},mt={class:"row-1"},vt=["title"],ft={class:"rules-count"},gt={key:0,class:"row-2"},_t={class:"card-description"},ht={class:"row-3 card-tags"};function pt(H,a,u,e,S,p){const m=y("el-tag");return v(),_("div",{class:Se(["standard-card",{selected:u.isSelected}]),onClick:a[0]||(a[0]=k=>H.$emit("select",u.standard))},[i(" Card Content "),s("div",ut,[i(" Row 1: Title + Rules Count "),s("div",mt,[s("h4",{class:"card-title",title:u.standard.name},D(u.standard.name),9,vt),s("div",ft,D(e.rulesCount)+" rules",1)]),i(" Row 2: Description "),u.standard.description?(v(),_("div",gt,[s("p",_t,D(u.standard.description),1)])):i("v-if",!0),i(" Row 3: Tags "),s("div",ht,[u.standard.category?(v(),$(m,{key:0,type:u.standard.category==="general"?"primary":"warning",size:"small",class:"tag-item"},{default:d(()=>[x(D(u.standard.category),1)]),_:1},8,["type"])):i("v-if",!0)])])],2)}const yt=ye(ct,[["render",pt],["__scopeId","data-v-bf5dced0"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/taskLibrary/components/Library/StandardCard.vue"]]),St=Ce({name:"standardLibrary"}),Ct=Object.assign(St,{setup(H,{expose:a}){a();const u=ie(),{loading:e,standards:S,loadstandards:p,createStandard:m,updateStandard:k,deleteStandard:z,setFilter:P,clearFilters:A,pagination:h,setPage:K,setPageSize:q,getStandardId:N}=pe(),T=f(""),F=f(""),j=U({get:()=>h.value.currentPage,set:n=>K(n)}),M=U({get:()=>h.value.pageSize,set:n=>q(n)}),C=f(null),V=f(!1),R=f(null),o=f(!1),t=f(""),r=f(!1),w=f(!1),Q=f("general"),B=f(!1),G=f(!1),W=f(!1),Z=f({name:"",description:"",category:"",items:[]}),L=f(null),O=f(""),ee=f(50),J=f(34),we=U(()=>{const n=ee.value+J.value;return`calc(100vh - ${n>0?n:84}px)`}),be=U(()=>["food-safety","general"]),b=U(()=>S.value.find(n=>N(n)===C.value)),De=U(()=>{const n=h.value.total,c=n===0?0:(j.value-1)*M.value+1,I=Math.min(j.value*M.value,n);return{start:c,end:I,total:n}}),le=()=>{P("search",T.value)},ke=he(le,300),Fe=()=>{P("category",F.value)},xe=()=>{T.value="",F.value="",A()},ne=()=>{F.value="";const n=T.value;A(),P("search",n)},ze=()=>{w.value=!w.value,ne()},Pe=n=>{j.value=n},Ve=n=>{M.value=n},Re=n=>{C.value=N(n)},se=(n=b.value)=>{n&&(W.value=!0,Z.value={name:n.name||"",description:n.description||"",category:n.category||"",items:[...n.items||[]]},B.value=!0)},oe=async(n=b.value)=>{if(n)try{const c={name:`${n.name} (Copy)`,description:n.description,category:n.category,items:[...n.items||[]],module:200};await m(c),g.success("Safety measure duplicated successfully"),await p()}catch{g.error("Failed to duplicate standard")}},de=n=>{R.value=n,t.value="",r.value=!1,V.value=!0},Ie=()=>{var n;r.value=t.value===((n=R.value)==null?void 0:n.name)},Ee=()=>{V.value=!1,R.value=null,t.value="",r.value=!1},Te=async()=>{if(R.value){o.value=!0;try{await z(N(R.value)),C.value===N(R.value)&&(C.value=null),V.value=!1,R.value=null,t.value="",r.value=!1}catch{g.error("Failed to delete standard")}finally{o.value=!1}}},Le=n=>{switch(n){case"edit":se();break;case"duplicate":oe();break;case"delete":de(b.value);break}},He=()=>{W.value=!1,Z.value={name:"",description:"",category:"",items:[]},B.value=!0},Ne=()=>{B.value=!1,Z.value={name:"",description:"",category:"",items:[]}},Me=async n=>{G.value=!0;try{const c={...n,module:200};if(W.value){const I=C.value;if(!I){g.error("Standard ID is missing. Please refresh and try again.");return}await k(I,c),g.success("Standard updated successfully"),await p(),C.value=I}else await m(c),g.success("Standard created successfully"),await p();B.value=!1}catch{g.error(W.value?"Failed to update standard":"Failed to create standard")}finally{G.value=!1}},Be=()=>{b.value&&L.value===null&&(L.value=b.value.items.length,O.value="",b.value.items.push(""))},Ue=(n,c)=>{L.value=n,O.value=c},Ae=()=>{if(L.value===null)return;b.value.items[L.value]===""&&b.value.items.splice(L.value,1),L.value=null,O.value=""},je=async n=>{if(b.value){if(O.value.trim()===""){try{const c=[...b.value.items];c.splice(n,1);const I={...b.value,items:c,module:200},E=C.value;if(!E){g.error("Standard ID is missing. Please refresh and try again.");return}await k(E,I),await p(),C.value=E}catch{g.error("Failed to remove empty rule")}L.value=null,O.value="";return}try{const c=[...b.value.items];c[n]=O.value.trim();const I={...b.value,items:c,module:200},E=C.value;if(!E){g.error("Standard ID is missing. Please refresh and try again.");return}await k(E,I),await p(),C.value=E,L.value=null,O.value=""}catch{g.error("Failed to save standard rule")}}},Oe=async n=>{if(b.value)try{await ue.confirm("Are you sure you want to delete this rule?","Confirm Deletion",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"});const c=[...b.value.items];c.splice(n,1);const I={...b.value,items:c,module:200},E=C.value;if(!E){g.error("Standard ID is missing. Please refresh and try again.");return}await k(E,I),await p(),C.value=E,g.success("Rule deleted successfully")}catch(c){c!=="cancel"&&g.error("Failed to delete standard rule")}},X=()=>{ge(()=>{const n=document.querySelector(".navbar");n&&n.offsetHeight>0&&(ee.value=n.offsetHeight);const c=document.querySelector("#tags-view-container");u.tagsView&&c&&c.offsetHeight>0?J.value=c.offsetHeight:J.value=0})},te=()=>{X()};me(()=>u.tagsView,()=>{X()},{immediate:!1}),ve(()=>{X(),window.addEventListener("resize",te),p()}),fe(()=>{window.removeEventListener("resize",te)});const re={settingsStore:u,loading:e,standards:S,loadstandards:p,createStandard:m,updateStandard:k,deleteStandard:z,setFilter:P,clearFilters:A,pagination:h,setPage:K,setPageSize:q,getStandardId:N,searchQuery:T,categoryFilter:F,currentPage:j,pageSize:M,selectedstandardId:C,deleteDialogVisible:V,standardToDelete:R,deleteLoading:o,deleteConfirmationText:t,deleteConfirmationValid:r,showFilters:w,activeTab:Q,formDialogVisible:B,formLoading:G,isEditMode:W,formData:Z,editingRuleIndex:L,editingRuleText:O,navbarHeight:ee,tagsViewHeight:J,containerHeight:we,availableCategories:be,selectedstandard:b,paginationInfo:De,handleSearchImmediate:le,handleSearch:ke,handleCategoryFilter:Fe,clearAllFilters:xe,clearNonSearchFilters:ne,handleFilterToggle:ze,handlePageChange:Pe,handlePageSizeChange:Ve,handlestandardSelect:Re,handlestandardEdit:se,handlestandardDuplicate:oe,handlestandardDelete:de,validateDeleteConfirmation:Ie,handleDeleteCancel:Ee,handleDeleteConfirm:Te,handleHeaderAction:Le,createNewstandard:He,handleFormCancel:Ne,handleFormSubmit:Me,addNewRule:Be,editRule:Ue,cancelEdit:Ae,saveRule:je,deleteRule:Oe,calculateDynamicHeights:X,handleResize:te,__MACROS_defineComponent:Ce,ref:f,computed:U,onMounted:ve,onBeforeUnmount:fe,watch:me,nextTick:ge,get debounce(){return he},get useSettingsStore(){return ie},get Filter(){return $e},get Search(){return Xe},get Plus(){return Je},get Edit(){return Ze},get Delete(){return Ye},get DocumentCopy(){return We},get MoreFilled(){return Ge},get Warning(){return Qe},get Check(){return Ke},get Close(){return qe},get ElMessage(){return g},get ElMessageBox(){return ue},get useStandards(){return pe},standardCard:yt,CreateStandardDialog:it};return Object.defineProperty(re,"__isScriptSetup",{enumerable:!1,value:!0}),re}}),wt={class:"left-panel"},bt={class:"search-bar"},Dt={class:"filter-controls"},kt={class:"filter-controls"},Ft={class:"standard-list"},xt={key:0,class:"loading-container"},zt={key:1,class:"empty-list"},Pt={key:2,class:"list-content"},Vt={class:"pagination-info"},Rt={class:"info-text"},It={class:"standards-container"},Et={class:"pagination-container"},Tt={class:"right-panel"},Lt={key:0,class:"no-selection"},Ht={class:"no-selection-content"},Nt={key:1,class:"standard-details"},Mt={class:"fixed-header-section"},Bt={class:"details-header"},Ut={class:"header-main"},At={class:"standard-title"},jt={class:"header-actions"},Ot={class:"standard-tabs-header"},qt={class:"scrollable-content"},Kt={class:"tab-content-wrapper"},Qt={key:0,class:"tab-pane-content"},Gt={class:"overview-card"},Wt={class:"card-content"},Yt={class:"info-value highlight"},Zt={class:"standard-id"},Jt={key:0,class:"description-card"},Xt={class:"card-content"},$t={class:"description-text"},ea={key:1,class:"tab-pane-content"},ta={key:0,class:"rules-list"},aa={class:"card-header"},la={class:"rules-container"},na={class:"rule-number"},sa={class:"rule-content"},oa={key:0,class:"rule-text"},da={class:"rule-actions"},ra={key:1,class:"empty-rules"},ia={class:"delete-confirmation-content"},ca={class:"name-confirmation-section"},ua={class:"dialog-footer"};function ma(H,a,u,e,S,p){const m=y("el-icon"),k=y("el-tooltip"),z=y("el-input"),P=y("el-option"),A=y("el-select"),h=y("el-button"),K=y("el-skeleton"),q=y("el-empty"),N=y("el-pagination"),T=y("el-dropdown-item"),F=y("el-dropdown-menu"),j=y("el-dropdown"),M=y("el-tab-pane"),C=y("el-tabs"),V=y("el-descriptions-item"),R=y("el-descriptions"),o=y("el-dialog");return v(),_("div",{class:"standard-library-view",style:dt({height:e.containerHeight})},[i(" Left Panel - standard List "),s("div",wt,[i(" Filters Section "),s("div",{class:Se(["filters-section",{"filters-collapsed":!e.showFilters}])},[i(" Search Input "),s("div",bt,[l(z,{modelValue:e.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchQuery=t),placeholder:"Search Keyword...",clearable:"",onInput:e.handleSearch,onClear:e.handleSearch},{prefix:d(()=>[l(m,null,{default:d(()=>[l(e.Search)]),_:1})]),suffix:d(()=>[l(k,{content:"Show/Hide filters",placement:"top"},{default:d(()=>[l(m,{class:"filter-toggle",onClick:rt(e.handleFilterToggle,["stop"])},{default:d(()=>[l(e.Filter)]),_:1})]),_:1})]),_:1},8,["modelValue","onInput","onClear"])]),i(" Filter Controls "),st(s("div",Dt,[s("div",kt,[l(A,{modelValue:e.categoryFilter,"onUpdate:modelValue":a[1]||(a[1]=t=>e.categoryFilter=t),placeholder:"Category",clearable:"",size:"small",style:{width:"140px"},onChange:e.handleCategoryFilter},{default:d(()=>[(v(!0),_(Y,null,ae(e.availableCategories,t=>(v(),$(P,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(h,{size:"small",onClick:e.clearAllFilters},{default:d(()=>a[10]||(a[10]=[x(" Clear Filters ")])),_:1,__:[10]})])],512),[[ot,e.showFilters]])],2),i(" standard Cards "),s("div",Ft,[e.loading?(v(),_("div",xt,[l(K,{rows:3,animated:""})])):e.standards.length===0?(v(),_("div",zt,[l(q,{description:"No standards found","image-size":80})])):(v(),_("div",Pt,[i(" Pagination Info "),s("div",Vt,[s("div",Rt," Showing "+D(e.paginationInfo.start)+"-"+D(e.paginationInfo.end)+" of "+D(e.pagination.total)+" standards ",1),l(A,{modelValue:e.pageSize,"onUpdate:modelValue":a[2]||(a[2]=t=>e.pageSize=t),onChange:e.handlePageSizeChange,size:"small",style:{width:"100px"}},{default:d(()=>[l(P,{label:"10",value:10}),l(P,{label:"20",value:20}),l(P,{label:"50",value:50})]),_:1},8,["modelValue"])]),i(" standard Cards List "),s("div",It,[(v(!0),_(Y,null,ae(e.standards,t=>(v(),$(e.standardCard,{key:e.getStandardId(t),standard:t,"is-selected":e.selectedstandardId===e.getStandardId(t),onSelect:e.handlestandardSelect,onEdit:e.handlestandardEdit,onDuplicate:e.handlestandardDuplicate,onDelete:e.handlestandardDelete},null,8,["standard","is-selected"]))),128))]),i(" Pagination "),s("div",Et,[l(N,{"current-page":e.currentPage,"onUpdate:currentPage":a[3]||(a[3]=t=>e.currentPage=t),"page-size":e.pageSize,"onUpdate:pageSize":a[4]||(a[4]=t=>e.pageSize=t),total:e.pagination.total,"page-sizes":[10,20,50],"pager-count":3,layout:"total, prev, pager, next, jumper",onCurrentChange:e.handlePageChange,onSizeChange:e.handlePageSizeChange},null,8,["current-page","page-size","total"])])]))])]),i(" Right Panel - standard Details/Actions "),s("div",Tt,[e.selectedstandard?(v(),_("div",Nt,[i(" Fixed Header Section "),s("div",Mt,[i(" standard Header "),s("div",Bt,[s("div",Ut,[s("h2",At,D(e.selectedstandard.name),1)]),s("div",jt,[l(h,{type:"primary",size:"default",onClick:e.createNewstandard,class:"create-button"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Plus)]),_:1}),a[14]||(a[14]=x(" Create "))]),_:1,__:[14]}),l(j,{trigger:"click",onCommand:e.handleHeaderAction},{dropdown:d(()=>[l(F,null,{default:d(()=>[l(T,{command:"edit"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Edit)]),_:1}),a[15]||(a[15]=x(" Edit "))]),_:1,__:[15]}),l(T,{command:"duplicate"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.DocumentCopy)]),_:1}),a[16]||(a[16]=x(" Duplicate "))]),_:1,__:[16]}),l(T,{command:"delete",divided:"",class:"delete-dropdown-item"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Delete)]),_:1}),a[17]||(a[17]=x(" Delete "))]),_:1,__:[17]})]),_:1})]),default:d(()=>[l(h,{type:"text",size:"default",class:"action-button"},{default:d(()=>[l(m,{class:"rotated-icon"},{default:d(()=>[l(e.MoreFilled)]),_:1})]),_:1})]),_:1})])]),i(" Tab Navigation "),s("div",Ot,[l(C,{modelValue:e.activeTab,"onUpdate:modelValue":a[5]||(a[5]=t=>e.activeTab=t),class:"details-tabs"},{default:d(()=>[l(M,{label:"General",name:"general"}),l(M,{label:"Standard Rules",name:"rules"})]),_:1},8,["modelValue"])])]),i(" Scrollable Content Area "),s("div",qt,[s("div",Kt,[i(" General Tab Content "),e.activeTab==="general"?(v(),_("div",Qt,[i(" standard Overview Card "),s("div",Gt,[s("div",Wt,[l(R,{column:2,direction:"vertical"},{default:d(()=>[l(V,{width:"50%",label:"Category"},{default:d(()=>[x(D(e.selectedstandard.category||"Uncategorized"),1)]),_:1}),l(V,{width:"50%",label:"Total Rules"},{default:d(()=>{var t;return[s("span",Yt,D(((t=e.selectedstandard.items)==null?void 0:t.length)||0)+" rules",1)]}),_:1}),i('                    <el-descriptions-item width="50%" label="Standard ID">'),i('                      <span class="standard-id">{{ getStandardId(selectedstandard) }}</span>'),i("                    </el-descriptions-item>"),l(V,{width:"50%",label:"Standard Code"},{default:d(()=>[s("span",Zt,D(e.selectedstandard.code||"N/A"),1)]),_:1})]),_:1})])]),i(" Description Section "),e.selectedstandard.description?(v(),_("div",Jt,[a[18]||(a[18]=s("div",{class:"card-header"},[s("h3",{class:"card-title"},"Description")],-1)),s("div",Xt,[s("div",$t,D(e.selectedstandard.description),1)])])):i("v-if",!0)])):i("v-if",!0),i(" Standard Rules Tab Content "),e.activeTab==="rules"?(v(),_("div",ea,[i(" Standard Rules List "),e.selectedstandard.items&&e.selectedstandard.items.length>0?(v(),_("div",ta,[s("div",aa,[a[20]||(a[20]=s("h3",{class:"card-title"},"Standard Rules",-1)),l(h,{type:"primary",size:"default",onClick:e.addNewRule,plain:"",style:{"font-weight":"550"}},{default:d(()=>a[19]||(a[19]=[x(" + Rule ")])),_:1,__:[19]})]),s("div",la,[(v(!0),_(Y,null,ae(e.selectedstandard.items,(t,r)=>(v(),_("div",{key:r,class:"rule-item"},[s("div",na,D(r+1),1),s("div",sa,[e.editingRuleIndex===null||e.editingRuleIndex!==r?(v(),_("div",oa,D(t),1)):(v(),$(z,{key:1,modelValue:e.editingRuleText,"onUpdate:modelValue":a[6]||(a[6]=w=>e.editingRuleText=w),onKeyup:_e(w=>e.saveRule(r),["enter"]),ref_for:!0,ref:"ruleInput"},null,8,["modelValue","onKeyup"]))]),s("div",da,[e.editingRuleIndex===r?(v(),_(Y,{key:0},[l(h,{type:"text",size:"default",onClick:w=>e.saveRule(r),title:"Save"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Check)]),_:1})]),_:2},1032,["onClick"]),l(h,{type:"text",size:"default",onClick:e.cancelEdit,title:"Cancel"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Close)]),_:1})]),_:1})],64)):(v(),_(Y,{key:1},[l(h,{type:"text",size:"default",onClick:w=>e.editRule(r,t),title:"Edit"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Edit)]),_:1})]),_:2},1032,["onClick"]),l(h,{type:"text",size:"default",onClick:w=>e.deleteRule(r),title:"Delete",class:"delete-btn"},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Delete)]),_:1})]),_:2},1032,["onClick"])],64))])]))),128))])])):(v(),_("div",ra,[l(q,{description:"No standard rules defined yet","image-size":60},{default:d(()=>[l(h,{type:"primary",onClick:e.addNewRule},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Plus)]),_:1}),a[21]||(a[21]=x(" Add First Rule "))]),_:1,__:[21]})]),_:1})]))])):i("v-if",!0)])])])):(v(),_("div",Lt,[s("div",Ht,[l(m,{class:"no-selection-icon"},{default:d(()=>[l(e.Warning)]),_:1}),a[12]||(a[12]=s("h3",null,"Select a standard",-1)),a[13]||(a[13]=s("p",null,"Choose a standard from the list to view details and actions",-1)),l(h,{type:"primary",onClick:e.createNewstandard,style:{"margin-top":"8px"}},{default:d(()=>[l(m,null,{default:d(()=>[l(e.Plus)]),_:1}),a[11]||(a[11]=x(" Create a New standard "))]),_:1,__:[11]})])]))]),i(" Delete Confirmation Dialog "),l(o,{"model-value":e.deleteDialogVisible,"onUpdate:modelValue":a[9]||(a[9]=t=>e.deleteDialogVisible=t),title:"Delete Standard",width:"500px","before-close":e.handleDeleteCancel},{footer:d(()=>[s("span",ua,[l(h,{onClick:e.handleDeleteCancel},{default:d(()=>a[23]||(a[23]=[x("Cancel")])),_:1,__:[23]}),l(h,{type:"danger",onClick:e.handleDeleteConfirm,loading:e.deleteLoading,disabled:!e.deleteConfirmationValid},{default:d(()=>a[24]||(a[24]=[x(" Delete ")])),_:1,__:[24]},8,["loading","disabled"])])]),default:d(()=>{var t;return[s("div",ia,[s("p",null,[s("strong",null,'Are you sure you want to delete "'+D((t=e.standardToDelete)==null?void 0:t.name)+'"?',1)]),a[22]||(a[22]=s("p",{style:{color:"#f56c6c","font-size":"14px",margin:"12px 0"}},"This action cannot be undone.",-1)),s("div",ca,[l(z,{modelValue:e.deleteConfirmationText,"onUpdate:modelValue":a[7]||(a[7]=r=>e.deleteConfirmationText=r),placeholder:"Type the exact standard name",onInput:e.validateDeleteConfirmation,onKeyup:a[8]||(a[8]=_e(r=>e.deleteConfirmationValid?e.handleDeleteConfirm():null,["enter"]))},null,8,["modelValue"])])])]}),_:1},8,["model-value"]),i(" Standard Form Dialog "),l(e.CreateStandardDialog,{visible:e.formDialogVisible,"is-edit-mode":e.isEditMode,"initial-data":e.formData,loading:e.formLoading,onClose:e.handleFormCancel,onSubmit:e.handleFormSubmit},null,8,["visible","is-edit-mode","initial-data","loading"])],4)}const Ga=ye(Ct,[["render",ma],["__scopeId","data-v-127741b1"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/taskLibrary/views/StandardsLibraryView.vue"]]);export{Ga as default};
