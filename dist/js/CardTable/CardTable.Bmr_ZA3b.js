import"../vue/vue.Dfo81L2Q.js";import{_ as z}from"../../assets/index-CE-d1vf_.js";import{am as p,c as M,o as r,O as a,a as d,S as l,K as k,L as t,Q as v,R as b,Y as B,F as U,a8 as q,j as C,r as D,G as N,w as O,aM as Q,q as E,Z as R}from"../@vue/@vue.CVGyaoMH.js";import{ah as W,v as F,E as H,M as K}from"../@element-plus/@element-plus.BNeHluFm.js";import{a as G,M as Y}from"../MaintenanceWorkOrderCard/MaintenanceWorkOrderCard.CWj1vAV1.js";import{c as P}from"../element-plus/element-plus.CU5xiOkY.js";const Z={__name:"MaintenanceSelectedTaskCard",props:{template:{type:Object,required:!0},assigneeOptions:{type:Array,default:()=>[]}},emits:["selection","assignee-update","open-assignee-dialog"],setup(S,{expose:n,emit:o}){n();const e=S,c=o,w=C(()=>{var h,A,L;return((h=e.template)==null?void 0:h.total_steps)??((L=(A=e.template)==null?void 0:A.steps)==null?void 0:L.length)??0}),u=C(()=>{var A,L,j;const h=(A=e.template)==null?void 0:A.category;return h?typeof h=="object"?h.name||h.label||"":typeof h=="number"?((L=e.template)==null?void 0:L.category_name)||((j=e.template)==null?void 0:j.categoryLabel)||"":h:""}),_=C(()=>{var h;return((h=e.template)==null?void 0:h.source)==="adhoc"}),g=C(()=>{var A;const h=(A=e.template)==null?void 0:A.applicable_assets;return!h||h.length===0?"":h.length===1?h[0]:`${h.length} assets`}),f=C(()=>{var h,A,L;return((A=(h=e.template)==null?void 0:h.payload)==null?void 0:A.assignee_ids)||((L=e.template)==null?void 0:L.assignee_ids)||[]}),x=C(()=>e.assigneeOptions.filter(h=>f.value.includes(h.id))),T=C(()=>x.value.length>0),s=C(()=>e.assigneeOptions||[]),m=h=>{const A=f.value.filter(L=>L!==h);y(A)},i=()=>{c("open-assignee-dialog",{taskId:e.template.id,taskData:e.template,currentAssigneeIds:f.value})},y=h=>{c("assignee-update",{taskId:e.template.id,assigneeIds:h,taskData:e.template})},V={props:e,emit:c,stepsCount:w,categoryLabel:u,isAdhoc:_,assetLabel:g,taskAssigneeIds:f,assignedUsers:x,hasAssignees:T,availableUsers:s,removeAssignee:m,openAssigneeDialog:i,updateTaskAssignees:y,handleEdit:()=>{c("selection",{id:e.template.id,action:"edit",data:e.template})},handlePreview:()=>{c("selection",{id:e.template.id,action:"preview",data:e.template})},handleDelete:()=>{P.confirm(`Are you sure you want to delete the task "${e.template.name}"?`,"Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(()=>{c("selection",{id:e.template.id,action:"delete",data:e.template})}).catch(()=>{})},computed:C,ref:D,get ElMessageBox(){return P},get MoreFilled(){return H},get View(){return F},get User(){return W}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},J={class:"template-card"},X={class:"card-content"},$={class:"row-1"},ee={class:"title-with-badges"},te={class:"action-icons"},ae={class:"row-2 card-tags"},ne={class:"tags-left"},se={class:"steps-count"},oe={key:0,class:"row-3"},le={class:"assignees-section"},de={class:"assignees-header"},ce={class:"assigned-users"};function ie(S,n,o,e,c,w){const u=p("el-text"),_=p("el-tag"),g=p("el-icon"),f=p("el-dropdown-item"),x=p("el-dropdown-menu"),T=p("el-dropdown");return r(),M("div",J,[a(" Card Content "),d("div",X,[a(" Row 1: Title + Kebab Menu "),d("div",$,[d("div",ee,[l(u,{class:"card-title",title:o.template.name,truncated:""},{default:t(()=>[v(b(o.template.name),1)]),_:1},8,["title"]),e.isAdhoc?(r(),k(_,{key:0,size:"small",type:"primary",effect:"plain",class:"adhoc-tag"},{default:t(()=>n[1]||(n[1]=[v(" Work Order Only ")])),_:1,__:[1]})):a("v-if",!0)]),a(" Action Icons "),d("div",te,[l(g,{class:"view-icon",onClick:B(e.handlePreview,["stop"]),title:"Preview"},{default:t(()=>[l(e.View)]),_:1}),l(T,{class:"kebab-dropdown",onClick:n[0]||(n[0]=B(()=>{},["stop"]))},{dropdown:t(()=>[l(x,null,{default:t(()=>[l(f,{onClick:e.handleEdit},{default:t(()=>n[2]||(n[2]=[v("Edit")])),_:1,__:[2]}),l(f,{onClick:e.openAssigneeDialog},{default:t(()=>n[3]||(n[3]=[v("Assign")])),_:1,__:[3]}),l(f,{divided:"",onClick:e.handleDelete},{default:t(()=>n[4]||(n[4]=[v("Delete")])),_:1,__:[4]})]),_:1})]),default:t(()=>[l(g,{class:"kebab-icon"},{default:t(()=>[l(e.MoreFilled)]),_:1})]),_:1})])]),a(" Row 2: Tags + Steps "),d("div",ae,[d("div",ne,[e.categoryLabel?(r(),k(_,{key:0,size:"small",class:"tag-item"},{default:t(()=>[v(b(e.categoryLabel),1)]),_:1})):a("v-if",!0),e.assetLabel?(r(),k(_,{key:1,size:"small",type:"info",class:"tag-item"},{default:t(()=>[v(b(e.assetLabel),1)]),_:1})):a("v-if",!0),o.template.estimated_minutes?(r(),k(_,{key:2,size:"small",type:"warning",class:"tag-item"},{default:t(()=>[v(b(o.template.estimated_minutes)+" min ",1)]),_:1})):a("v-if",!0)]),d("div",se,b(e.stepsCount)+" steps",1)]),a(" Row 3: Assignees Section (only show when there are assignees) "),e.hasAssignees?(r(),M("div",oe,[d("div",le,[d("div",de,[l(g,{class:"assignee-icon"},{default:t(()=>[l(e.User)]),_:1}),n[5]||(n[5]=d("span",{class:"assignees-label"},"Assigned to:",-1)),d("div",ce,[(r(!0),M(U,null,q(e.assignedUsers,s=>(r(),k(_,{key:s.id,size:"small",closable:"",onClose:m=>e.removeAssignee(s.id),type:"primary",effect:"plain"},{default:t(()=>[v(b(s.name),1)]),_:2},1032,["onClose"]))),128))])])])])):a("v-if",!0)])])}const re=z(Z,[["render",ie],["__scopeId","data-v-b19e2164"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/components/Tables/Cards/MaintenanceSelectedTaskCard.vue"]]),_e={__name:"MaintenanceSelectedStandardsCard",props:{template:{type:Object,required:!0}},emits:["selection"],setup(S,{expose:n,emit:o}){n();const e=S,c=o,w=C(()=>{var s;return((s=e.template)==null?void 0:s.isStandalone)===!0}),u=C(()=>{var s,m,i,y;return((m=(s=e.template)==null?void 0:s.steps)==null?void 0:m.length)||((y=(i=e.template)==null?void 0:i.items)==null?void 0:y.length)||0}),_=C(()=>{var m;const s=(m=e.template)==null?void 0:m.category;return s?typeof s=="object"?s.name:s:""}),T={props:e,emit:c,isStandalone:w,stepsCount:u,categoryLabel:_,handleEdit:()=>{c("selection",{id:e.template.id,action:"edit",data:e.template})},handlePreview:()=>{c("selection",{id:e.template.id,action:"preview",data:e.template})},handleDelete:()=>{P.confirm(`Are you sure you want to delete the standard "${e.template.name}"?`,"Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(()=>{c("selection",{id:e.template.id,action:"delete",data:e.template})}).catch(()=>{})},computed:C,get ElMessageBox(){return P},get MoreFilled(){return H},get View(){return F}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},me={class:"template-card"},ue={class:"card-content"},pe={class:"row-1"},fe={class:"title-with-badges"},he={class:"action-icons"},ge={class:"row-3 card-tags"},ve={class:"tags-left"},ye={class:"steps-count"};function Ce(S,n,o,e,c,w){const u=p("el-text"),_=p("el-tag"),g=p("el-icon"),f=p("el-dropdown-item"),x=p("el-dropdown-menu"),T=p("el-dropdown");return r(),M("div",me,[a(" Card Content "),d("div",ue,[a(" Row 1: Title + Kebab Menu "),d("div",pe,[d("div",fe,[l(u,{class:"card-title",title:o.template.name,truncated:""},{default:t(()=>[v(b(o.template.name),1)]),_:1},8,["title"]),e.isStandalone?(r(),k(_,{key:0,size:"small",type:"primary",effect:"plain",class:"standalone-tag"},{default:t(()=>n[1]||(n[1]=[v(" Work Order Only ")])),_:1,__:[1]})):a("v-if",!0)]),a(" Action Icons "),d("div",he,[l(g,{class:"view-icon",onClick:B(e.handlePreview,["stop"]),title:"Preview"},{default:t(()=>[l(e.View)]),_:1}),l(T,{class:"kebab-dropdown",onClick:n[0]||(n[0]=B(()=>{},["stop"]))},{dropdown:t(()=>[l(x,null,{default:t(()=>[l(f,{onClick:e.handleEdit},{default:t(()=>n[2]||(n[2]=[v("Edit")])),_:1,__:[2]}),l(f,{divided:"",onClick:e.handleDelete},{default:t(()=>n[3]||(n[3]=[v("Delete")])),_:1,__:[3]})]),_:1})]),default:t(()=>[l(g,{class:"kebab-icon"},{default:t(()=>[l(e.MoreFilled)]),_:1})]),_:1})])]),a(" Row 2: Description "),a('      <div class="row-2" v-if="template.description">'),a('        <p class="card-description">{{ template.description }}</p>'),a("      </div>"),a(" Row 3: Tags + Rules "),d("div",ge,[d("div",ve,[e.categoryLabel?(r(),k(_,{key:0,type:o.template.category==="general"?"primary":"warning",size:"small",class:"tag-item"},{default:t(()=>[v(b(e.categoryLabel),1)]),_:1},8,["type"])):a("v-if",!0)]),d("div",ye,b(e.stepsCount)+" rules",1)])])])}const be=z(_e,[["render",Ce],["__scopeId","data-v-4ca6cac1"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/components/Tables/Cards/MaintenanceSelectedStandardsCard.vue"]]),we={__name:"Card",props:{data:Object},emits:["selection"],setup(S,{expose:n,emit:o}){n();const e=S,c=o;function w(){c("selection",e.data)}const u={props:e,emit:c,handleEmit:w};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},ke={class:"spare-parts-card"},Se={class:"left-container"},xe={class:"description-container"},Te={class:"right-container"};function Ae(S,n,o,e,c,w){const u=p("el-text"),_=p("el-descriptions-item"),g=p("el-descriptions"),f=p("el-image"),x=p("el-card");return r(),M("div",ke,[l(x,{style:{width:"100%","border-radius":"10px"}},{default:t(()=>[d("div",{onClick:e.handleEmit,class:"card-container"},[d("div",Se,[d("div",null,[l(u,{type:"primary"},{default:t(()=>[v("#"+b(e.props.data.id),1)]),_:1})]),d("div",null,[l(u,{tag:"b"},{default:t(()=>[v(b(e.props.data.name),1)]),_:1})]),d("div",xe,[l(g,{column:1,direction:"horizontal"},{default:t(()=>[l(_,{label:"Material Code:"},{default:t(()=>[v(b(e.props.data.code),1)]),_:1}),l(_,{label:"Inventory Code:"},{default:t(()=>[v(b(e.props.data.universal_code),1)]),_:1})]),_:1})])]),d("div",Te,[d("div",null,[l(g,{column:1,direction:"horizontal"},{default:t(()=>[l(_,{label:"Current Stock:"},{default:t(()=>[l(u,{type:e.props.data.current_stock<e.props.data.minimum_stock_level?"danger":""},{default:t(()=>[v(b(e.props.data.current_stock)+" units ",1)]),_:1},8,["type"])]),_:1})]),_:1})]),l(f,{fit:S.fill,style:{width:"90px","border-radius":"100%","aspect-ratio":"1/1"},src:e.props.data.image_list},null,8,["fit","src"])])])]),_:1})])}const Me=z(we,[["render",Ae],["__scopeId","data-v-99ea6e9f"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Card.vue"]]),Le={__name:"AddNewTaskCard",props:{template:{type:Object,required:!0},selected:{type:Boolean,default:!1},focused:{type:Boolean,default:!1}},emits:["selection"],setup(S,{expose:n,emit:o}){n();const e=S,c=o,w=D(e.selected),u=C(()=>{var i,y,I;return((i=e.template)==null?void 0:i.total_steps)??((I=(y=e.template)==null?void 0:y.steps)==null?void 0:I.length)??0}),_=C(()=>{var y;const i=(y=e.template)==null?void 0:y.category;return i?typeof i=="object"?i.name:i:""}),g=C(()=>{var y;const i=(y=e.template)==null?void 0:y.applicable_assets;return!i||i.length===0?"":i.length===1?i[0]:`${i.length} assets`});O(()=>e.selected,i=>{w.value=i});const f=i=>{i?x():T()},x=()=>{c("selection",{id:e.template.id,action:"check",data:e.template})},T=()=>{c("selection",{id:e.template.id,action:"uncheck",data:e.template})},m={props:e,emit:c,checked:w,stepsCount:u,categoryLabel:_,assetLabel:g,handleCheckboxChange:f,handleCheck:x,handleUncheck:T,handleCardClick:()=>{c("selection",{id:e.template.id,action:"focus",data:e.template})},computed:C,ref:D,watch:O};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},De={class:"card-content"},Ie={class:"row-1"},ze={class:"row-2 card-tags"},Be={class:"tags-left"},Oe={class:"steps-count"};function Pe(S,n,o,e,c,w){const u=p("el-checkbox"),_=p("el-text"),g=p("el-tag");return r(),M("div",{class:N(["template-card",{focused:o.focused}]),onClick:e.handleCardClick},[d("div",De,[a(" Row 1: Checkbox + Title "),d("div",Ie,[l(u,{modelValue:e.checked,"onUpdate:modelValue":n[0]||(n[0]=f=>e.checked=f),class:"card-checkbox",onChange:e.handleCheckboxChange},null,8,["modelValue"]),l(_,{class:"card-title",title:o.template.name,truncated:""},{default:t(()=>[v(b(o.template.name),1)]),_:1},8,["title"])]),a(" Row 2: Tags + Steps "),d("div",ze,[d("div",Be,[e.categoryLabel?(r(),k(g,{key:0,size:"small",class:"tag-item"},{default:t(()=>[v(b(e.categoryLabel),1)]),_:1})):a("v-if",!0),e.assetLabel?(r(),k(g,{key:1,size:"small",type:"info",class:"tag-item"},{default:t(()=>[v(b(e.assetLabel),1)]),_:1})):a("v-if",!0),o.template.estimated_minutes?(r(),k(g,{key:2,size:"small",type:"warning",class:"tag-item"},{default:t(()=>[v(b(o.template.estimated_minutes)+" min ",1)]),_:1})):a("v-if",!0)]),d("div",Oe,b(e.stepsCount)+" steps",1)])])],2)}const Ne=z(Le,[["render",Pe],["__scopeId","data-v-4cabdb10"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/components/Tables/Cards/AddNewTaskCard.vue"]]),Ve={__name:"AddNewStandardCard",props:{template:{type:Object,required:!0},selected:{type:Boolean,default:!1},focused:{type:Boolean,default:!1}},emits:["selection"],setup(S,{expose:n,emit:o}){n();const e=S,c=o,w=D(e.selected),u=C(()=>{var m,i;return((i=(m=e.template)==null?void 0:m.items)==null?void 0:i.length)||0}),_=C(()=>{var i;const m=(i=e.template)==null?void 0:i.category;return m?typeof m=="object"?m.name:m:""});O(()=>e.selected,m=>{w.value=m});const g=m=>{m?f():x()},f=()=>{c("selection",{id:e.template.id,action:"check",data:e.template})},x=()=>{c("selection",{id:e.template.id,action:"uncheck",data:e.template})},s={props:e,emit:c,checked:w,rulesCount:u,categoryLabel:_,handleCheckboxChange:g,handleCheck:f,handleUncheck:x,handleCardClick:()=>{c("selection",{id:e.template.id,action:"focus",data:e.template})},computed:C,ref:D,watch:O};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},je={class:"card-content"},Ee={class:"row-1"},Re={class:"row-3 card-tags"},Ue={class:"tags-left"},qe={class:"rules-count"};function Fe(S,n,o,e,c,w){const u=p("el-checkbox"),_=p("el-text"),g=p("el-tag");return r(),M("div",{class:N(["standard-card",{focused:o.focused}]),onClick:e.handleCardClick},[d("div",je,[a(" Row 1: Checkbox + Title "),d("div",Ee,[l(u,{modelValue:e.checked,"onUpdate:modelValue":n[0]||(n[0]=f=>e.checked=f),class:"card-checkbox",onChange:e.handleCheckboxChange},null,8,["modelValue"]),l(_,{class:"card-title",title:o.template.name,style:{width:"200px"},truncated:""},{default:t(()=>[v(b(o.template.name),1)]),_:1},8,["title"])]),a(" Row 2: Description "),a('      <div class="row-2" v-if="template.description">'),a('        <p class="card-description">{{ template.description }}</p>'),a("      </div>"),a(" Row 3: Tags + Rules "),d("div",Re,[d("div",Ue,[e.categoryLabel?(r(),k(g,{key:0,type:o.template.category==="general"?"primary":"warning",size:"small",class:"tag-item"},{default:t(()=>[v(b(e.categoryLabel),1)]),_:1},8,["type"])):a("v-if",!0)]),d("div",qe,b(e.rulesCount)+" rules",1)])])],2)}const He=z(Ve,[["render",Fe],["__scopeId","data-v-36ee15c0"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/components/Tables/Cards/AddNewStandardCard.vue"]]),Qe={__name:"CardTable",props:{module:Number,data:Object,maxHeight:String,totalItems:Number,currentPage:Number,selectedItems:{type:Set,default:()=>new Set},pageSize:{type:Number,default:10},showBorder:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},searchPlaceholder:{type:String,default:"Search items..."},searchFields:{type:Array,default:()=>["name","category","description"]},focusedCardId:{type:[String,Number],default:null}},emits:["selection","page-change"],setup(S,{expose:n,emit:o}){n(),Q(s=>({"3b8558b2-maxHeight":S.maxHeight}));const e=S,c=D(e.maxHeight),w=D("");function u(){c.value=window.innerWidth<=1600?"465px":e.maxHeight}E(()=>{u(),window.addEventListener("resize",u)}),R(()=>{window.removeEventListener("resize",u)});const _=o;function g(s){_("page-change",s)}const f=C(()=>{if(!w.value||!e.data)return e.data||[];const s=w.value.toLowerCase().trim();return e.data.filter(m=>e.searchFields.some(i=>{const y=m[i];return typeof y=="string"?y.toLowerCase().includes(s):typeof y=="number"?y.toString().includes(s):!1}))});function x(s){_("selection",s)}const T={props:e,height:c,searchQuery:w,updateHeight:u,emit:_,handleCurrentChange:g,filteredData:f,handleSelection:x,Card:Me,ref:D,computed:C,onMounted:E,onBeforeUnmount:R,get Search(){return K},MaintenanceRequestCard:Y,MaintenanceWorkOrderCard:G,MaintenanceSelectedTaskCard:re,AddNewTaskCard:Ne,MaintenanceSelectedStandardsCard:be,AddNewStandardCard:He};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}},We={class:"card-table-wrapper"},Ke={key:0,class:"search-container"},Ge={key:0,class:"no-results"};function Ye(S,n,o,e,c,w){const u=p("el-icon"),_=p("el-input"),g=p("el-col"),f=p("el-row"),x=p("el-empty"),T=p("el-pagination");return r(),M("div",We,[a(" Search Bar "),o.showSearch?(r(),M("div",Ke,[l(_,{modelValue:e.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=s=>e.searchQuery=s),placeholder:o.searchPlaceholder,size:"default",clearable:"",class:"search-input"},{prefix:t(()=>[l(u,null,{default:t(()=>[l(e.Search)]),_:1})]),_:1},8,["modelValue","placeholder"])])):a("v-if",!0),d("div",{class:N(["card-scroll-container",{"with-border":o.showBorder}])},[l(f,{gutter:0},{default:t(()=>[(r(!0),M(U,null,q(e.filteredData,s=>(r(),k(g,{key:s.id,xs:24,sm:24,md:24,lg:24},{default:t(()=>{var m,i,y,I;return[e.props.module===1?(r(),k(e.Card,{key:0,data:s,onSelection:e.handleSelection},null,8,["data"])):a("v-if",!0),e.props.module===2?(r(),k(e.MaintenanceRequestCard,{key:1,data:s,onSelection:e.handleSelection},null,8,["data"])):a("v-if",!0),e.props.module===3?(r(),k(e.MaintenanceWorkOrderCard,{key:2,wo:s,onRequestData:e.handleSelection,module:2},null,8,["wo"])):a("v-if",!0),e.props.module===4?(r(),k(e.MaintenanceSelectedTaskCard,{key:3,template:s,onSelection:e.handleSelection},null,8,["template"])):a("v-if",!0),e.props.module===5?(r(),k(e.AddNewTaskCard,{key:4,template:s,focused:e.props.focusedCardId===s.id,selected:((i=(m=e.props.selectedItems)==null?void 0:m.has)==null?void 0:i.call(m,s.id))||!1,onSelection:e.handleSelection},null,8,["template","focused","selected"])):a("v-if",!0),e.props.module===6?(r(),k(e.MaintenanceSelectedStandardsCard,{key:5,template:s,onSelection:e.handleSelection},null,8,["template"])):a("v-if",!0),e.props.module===7?(r(),k(e.AddNewStandardCard,{key:6,template:s,focused:e.props.focusedCardId===s.id,selected:((I=(y=e.props.selectedItems)==null?void 0:y.has)==null?void 0:I.call(y,s.id))||!1,onSelection:e.handleSelection},null,8,["template","focused","selected"])):a("v-if",!0)]}),_:2},1024))),128))]),_:1}),a(" No results message "),e.filteredData.length===0&&e.searchQuery?(r(),M("div",Ge,[l(x,{description:"No items found matching your search","image-size":80})])):a("v-if",!0)],2),o.showPagination?(r(),k(T,{key:1,layout:"prev, pager, next","current-page":o.currentPage,"page-size":o.pageSize,total:o.totalItems,"pager-count":3,onCurrentChange:e.handleCurrentChange,class:"pagination"},null,8,["current-page","page-size","total"])):a("v-if",!0)])}const st=z(Qe,[["render",Ye],["__scopeId","data-v-3b8558b2"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/components/Tables/CardTable.vue"]]);export{st as C,be as M,re as a};
