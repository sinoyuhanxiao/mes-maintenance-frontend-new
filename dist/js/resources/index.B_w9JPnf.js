import"../vue/vue.Dfo81L2Q.js";import{C as Ve}from"../CardTable/CardTable.qteQPHi0.js";import{A as we,M as ge,b as be,P as $,a as De,ak as Pe,V as ee,q as ke,al as xe,a0 as Ce,am as Te}from"../@element-plus/@element-plus.BNeHluFm.js";import{e as le}from"../equipment/equipment.DNKw76bx.js";import{_ as E}from"../../assets/index-fCswSekQ.js";import{am as i,c as T,o as V,O as k,S as a,L as l,a as f,Q as d,R as P,K as U,F as I,a8 as O,r as c,w as S,_ as L,j as G,q as z,E as Se,Z as W,P as Ue}from"../@vue/@vue.CVGyaoMH.js";import{s as oe,u as H,g as Y,c as ne,t as re,a as ie,b as se,d as de,e as Z,f as ue,h as ce,i as _e,j as me,k as pe}from"./resources.CxsExR5N.js";import{c as te}from"../datetime/datetime.39-ZCqKU.js";import{s as fe}from"../vendor/vendor.DrABQpxa.js";import{d as Q}from"../common/common.CHi731XS.js";import{E as M}from"../element-plus/element-plus.CU5xiOkY.js";import{u as K}from"../minio/minio.DwZpSMzM.js";import{F as ae}from"../FileUploadMultiple/FileUploadMultiple.XhmJ4C99.js";import{g as ve,b as J,a as X}from"../location/location.BVdMXW2_.js";import"../MaintenanceWorkOrderCard/MaintenanceWorkOrderCard.CBR2k6k0.js";import"../pinia/pinia.CzPcBe5J.js";import"../vue-demi/vue-demi.-dVQ4Px2.js";import"../js-cookie/js-cookie.Cz0CWeBA.js";import"../geotiff/geotiff.Dp1pzeXC.js";import"../vue-router/vue-router.30cuaQZO.js";import"../path-to-regexp/path-to-regexp.i8-bKtXe.js";import"../fuse.js/fuse.js.BiDyM4rQ.js";import"../path-browserify/path-browserify.DkEToxTs.js";import"../screenfull/screenfull.DmVOzVZz.js";import"../vue-i18n/vue-i18n.DjO1PVT4.js";import"../@intlify/@intlify.BhOIvmlS.js";import"../mitt/mitt.DJ65BbbF.js";import"../lodash-es/lodash-es.BLHqGvLj.js";import"../@vueuse/@vueuse.B5lT-MN9.js";import"../axios/axios.Dq7h7Pqt.js";import"../nprogress/nprogress._Z8YfKSV.js";/* empty css                                 */import"../clipboard/clipboard.DAe4Lk7l.js";import"../vue3-lottie/vue3-lottie.DS19j_I8.js";import"../lottie-web/lottie-web.fKmgUVyQ.js";import"../@popperjs/@popperjs.D_chPuIy.js";import"../@ctrl/@ctrl.r5W6hzzQ.js";import"../dayjs/dayjs.C0sY0_St.js";import"../async-validator/async-validator.D3FX-SGt.js";import"../memoize-one/memoize-one.BdPwpGay.js";import"../normalize-wheel-es/normalize-wheel-es.BQoi3Ox2.js";import"../@floating-ui/@floating-ui.85_40PfK.js";const Be={__name:"ViewDetails",props:{data:Object},setup(D,{expose:t}){t();const w=D,e=c(w.data),v=c(null);async function g(){const o=await le(1,100,"name","ASC",{spare_part_ids:[w.data.id]});v.value=o.data.content}S(()=>w.data,o=>{e.value={...o},g()},{immediate:!0,deep:!0},console.log(e.value));const r={props:w,localData:e,nodes:v,getNodeData:g,ref:c,watch:S,get Minus(){return we},get getEquipmentNodes(){return le}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Ie={class:"details-layout"},qe={class:"details-panel"},Le={key:0,style:{padding:"5px"}},Ne={class:"displays"},Ae={class:"displays"},Ee=["src"];function Me(D,t,w,e,v,g){const r=i("el-descriptions-item"),o=i("el-text"),n=i("el-descriptions"),b=i("el-breadcrumb-item"),p=i("el-breadcrumb"),m=i("el-card");return V(),T(I,null,[k(" <el-text>{{ localData }}</el-text> "),a(m,null,{default:l(()=>[f("div",Ie,[f("div",qe,[a(n,{column:3,direction:"vertical","label-width":"33%"},{default:l(()=>[a(r,{span:1,label:"Part Name"},{default:l(()=>[d(P(e.localData.name),1)]),_:1}),a(r,{span:1,label:"Material Code"},{default:l(()=>[d(P(e.localData.code),1)]),_:1}),a(r,{span:1,label:"Inventory Code"},{default:l(()=>[d(P(e.localData.universal_code),1)]),_:1}),a(r,{label:"Manufacturer"},{default:l(()=>[d(P(e.localData.manufacturer?e.localData.manufacturer.name:"n/a"),1)]),_:1}),a(r,{label:"Spare Part Class"},{default:l(()=>[d(P(e.localData.spare_parts_class?e.localData.spare_parts_class.name:""),1)]),_:1}),a(r,{label:"Reorder Point"},{default:l(()=>[d(P(e.localData.reorder_point),1)]),_:1}),a(r,{label:"Current Stock"},{default:l(()=>[a(o,{type:e.localData.current_stock<e.localData.minimum_stock_level?"danger":""},{default:l(()=>[d(P(e.localData.current_stock),1)]),_:1},8,["type"])]),_:1}),a(r,{label:"Minimum Stock"},{default:l(()=>[d(P(e.localData.minimum_stock_level),1)]),_:1}),a(r,{label:"Maximum Stock"},{default:l(()=>[d(P(e.localData.maximum_stock_level),1)]),_:1}),a(r,{label:"Description",span:3},{default:l(()=>[e.localData.description?(V(),T("span",Le,P(e.localData.description),1)):k("v-if",!0)]),_:1})]),_:1}),f("div",Ne,[a(m,null,{default:l(()=>[a(o,{tag:"b"},{default:l(()=>t[0]||(t[0]=[d("Related Assets")])),_:1,__:[0]}),t[2]||(t[2]=f("hr",null,null,-1)),k(" <el-text>{{ nodes }}</el-text> "),e.nodes?(V(),U(p,{key:0,style:{"padding-top":"10px"},"separator-icon":e.Minus},{default:l(()=>[(V(!0),T(I,null,O(e.nodes,_=>(V(),U(b,{key:_.id,label:_.name},{default:l(()=>[d(P(_.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["separator-icon"])):k("v-if",!0),!e.nodes||e.nodes.length==0?(V(),U(o,{key:1},{default:l(()=>t[1]||(t[1]=[d("No Associated Asssets")])),_:1,__:[1]})):k("v-if",!0)]),_:1,__:[2]})]),f("div",Ae,[a(m,null,{default:l(()=>[a(o,{tag:"b"},{default:l(()=>t[3]||(t[3]=[d("Related Images")])),_:1,__:[3]}),t[5]||(t[5]=f("hr",null,null,-1)),e.localData.image_list?(V(),T("img",{key:0,src:e.localData.image_list,style:{"border-radius":"100%","max-height":"150px","aspect-ratio":"1/0.75"}},null,8,Ee)):k("v-if",!0),e.localData.image_list?k("v-if",!0):(V(),U(o,{key:1},{default:l(()=>t[4]||(t[4]=[d("No Attached Images")])),_:1,__:[4]}))]),_:1,__:[5]})])])])]),_:1})],2112)}const Oe=E(Be,[["render",Me],["__scopeId","data-v-81b42461"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/ViewDetails.vue"]]),Re={};function Fe(D,t){const w=i("el-text");return V(),U(w,null,{default:l(()=>t[0]||(t[0]=[d("Usage Tab Pending...")])),_:1,__:[0]})}const je=E(Re,[["render",Fe],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Usage.vue"]]),ze={__name:"Transactions",props:{sparePart:Object},setup(D,{expose:t}){t();const w=D,e=c([]),v=c({material_type_id:3,material_id:null});async function g(){const o=await oe(1,50,"allocatedAt","DESC",v.value);e.value=o.data.content,console.log("LOGS: ",e.value)}S(()=>w.sparePart,o=>{o!=null&&o.id&&(v.value.material_id=o.id,g())},{deep:!0,immediate:!0});const r={props:w,logs:e,search:v,getLogData:g,get searchInventoryTransactionLogs(){return oe},watch:S,ref:c,get convertToLocalTime(){return te}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},He={class:"title"},Qe={class:"main-container-t"};function Ge(D,t,w,e,v,g){const r=i("el-text"),o=i("el-table-column"),n=i("el-table");return V(),T(I,null,[f("div",He,[a(r,null,{default:l(()=>[d("Transaction Logs ("+P(e.logs.length)+")",1)]),_:1})]),f("div",Qe,[(V(),U(n,{data:e.logs,key:e.logs.length,style:{width:"100%",height:"100%"},border:""},{default:l(()=>[a(o,{fixed:"",prop:"transaction_type.name",label:"Transaction Type",width:"180"}),a(o,{prop:"from_inventory.batch_number",label:"From Batch",width:"180"}),a(o,{prop:"to_inventory.batch_number",label:"To Batch",width:"180"}),a(o,{prop:"from_location.name",label:"From Location",width:"180"}),a(o,{prop:"to_location.name",label:"To Location",width:"180"}),a(o,{prop:"quantity_change",label:"Quantity Change",width:"150"}),a(o,{prop:"remark",label:"Remark",width:"150"}),a(o,{label:"Allocated At",width:"180"},{default:l(({row:b})=>[d(P(e.convertToLocalTime(b.allocated_at)),1)]),_:1})]),_:1},8,["data"]))])],64)}const Ke=E(ze,[["render",Ge],["__scopeId","data-v-ee6e8f52"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Transactions.vue"]]),We={};function Ye(D,t){const w=i("el-text");return V(),U(w,null,{default:l(()=>t[0]||(t[0]=[d("History Tab Pending...")])),_:1,__:[0]})}const Ze=E(We,[["render",Ye],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/History.vue"]]),Je={__name:"VendorCard",props:{data:Object,spData:Object},emits:["existing","new"],setup(D,{expose:t,emit:w}){t();const e=D,v=w;function g(){console.log(e.spData),e.spData?(console.log("existing sent"),v("existing",e)):v("new",e.data.vendor)}const r={props:e,emit:v,sendEmit:g};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Xe={class:"card-container"},$e={class:"left-container"},et={class:"description-container"},tt={class:"right-container"},at={key:0},lt={class:"order-details"};function ot(D,t,w,e,v,g){const r=i("el-text"),o=i("el-descriptions-item"),n=i("el-descriptions"),b=i("el-image"),p=i("el-card");return V(),U(p,{onClick:t[0]||(t[0]=m=>e.sendEmit()),style:{width:"100%","border-radius":"10px",cursor:"pointer"}},{default:l(()=>[f("div",Xe,[f("div",$e,[f("div",null,[a(r,{type:"primary"},{default:l(()=>[d("#"+P(e.props.data.id),1)]),_:1})]),f("div",null,[a(r,{tag:"b"},{default:l(()=>[d(P(e.props.data.name),1)]),_:1})]),f("div",et,[a(n,{column:1,direction:"horizontal"},{default:l(()=>[a(o,{label:"Abbreviation: "},{default:l(()=>[d(P(e.props.data.code),1)]),_:1}),a(o,{label:"Phone Number: "},{default:l(()=>[d(P(e.props.data.phone_number),1)]),_:1})]),_:1})])]),f("div",tt,[k(` <div class="close-icon" v-if="showClose " >
          <el-icon><Close /></el-icon>
        </div> `),a(b,{style:{width:"80px","border-radius":"100%","aspect-ratio":"1/1"},src:e.props.data.image_list?e.props.data.image_list[0]:null},null,8,["src"]),k(" <el-text>{{ props.data.image_list[0] }}</el-text> "),a(r,{style:{"margin-top":"20px"}},{default:l(()=>[d(P(e.props.data.address),1)]),_:1})])]),t[2]||(t[2]=f("hr",null,null,-1)),w.spData?(V(),T("div",at,[a(r,{tag:"b"},{default:l(()=>t[1]||(t[1]=[d("Ordering Details")])),_:1,__:[1]}),f("div",lt,[a(n,{column:4,direction:"horizontal",style:{width:"100%","margin-top":"10px"}},{default:l(()=>[a(o,{span:1,label:"Order Code: "},{default:l(()=>[d(P(e.props.spData.order_code),1)]),_:1}),a(o,{span:1,label:"Unit Price: "},{default:l(()=>[d(P(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.props.spData.unit_price)),1)]),_:1}),a(o,{span:1,label:"Currency: "},{default:l(()=>[d(P(e.props.spData.price_uom.name),1)]),_:1}),a(o,{span:1,label:"Lead Time: "},{default:l(()=>[d(P(e.props.spData.lead_time_days)+" Days",1)]),_:1})]),_:1})])])):k("v-if",!0)]),_:1,__:[2]})}const ye=E(Je,[["render",ot],["__scopeId","data-v-d35ae83b"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Vendors/VendorCard.vue"]]),nt={__name:"AddSPVendor",props:{vendor:Object,sparePart:Object},emits:["addVendor"],setup(D,{expose:t,emit:w}){var x,B;t();const e=D,v=c(null),g=c(e.sparePart),r=c(e.vendor),o=c(null),n=c(((B=(x=e.sparePart)==null?void 0:x.spare_part_vendors)==null?void 0:B.map(A=>{var q,N;return{vendor_id:((q=A.vendor)==null?void 0:q.id)??null,order_code:A.order_code??null,lead_time_days:A.lead_time_days??null,unit_price:A.unit_price??null,price_uom_id:((N=A.price_uom)==null?void 0:N.id)??null}}))??[]);S(()=>e,()=>{r.value=e.vendor,g.value=e.sparePart},{deep:!0});const b=w;async function p(){const A=await Q(11);o.value=A.data}p();const m=c({vendor_id:e.vendor.id,order_code:null,unit_price:null,lead_time_days:null,price_uom_id:null}),_=L({order_code:[{required:!0,message:"Please enter Ordering Code",trigger:"blur"}],unit_price:[{required:!0,message:"Please enter Unit Price",trigger:"blur"}],price_uom_id:[{required:!0,message:"Please select Currency",trigger:"blur"}],lead_time_days:[{required:!0,message:"Please enter Lead Time",trigger:"blur"}]}),h=A=>{M({message:"Spare Part Vendor Added: "+A,type:"success"})},y=async()=>{if(v.value)try{if(!await v.value.validate())return;n.value.push(m.value);const q=await H(e.sparePart.id,{code:e.sparePart.code,vendor_requests:n.value});q&&(b("addVendor",q.data),h(e.vendor.name),u())}catch(A){console.error("Creation of Spare Part Vendor Failed",A)}},u=()=>{v.value&&v.value.resetFields()},s={props:e,formRef:v,sparePartData:g,vendorData:r,price_units:o,existingVendors:n,emit:b,getUnits:p,inputData:m,rules:_,vendorAdded:h,addVendor:y,resetForm:u,ref:c,reactive:L,watch:S,get getUnitByType(){return Q},get ElMessage(){return M},get updateSparePart(){return H}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},rt={class:"details-layout"};function it(D,t,w,e,v,g){const r=i("el-text"),o=i("el-descriptions-item"),n=i("el-descriptions"),b=i("el-input"),p=i("el-form-item"),m=i("el-option"),_=i("el-select"),h=i("el-form"),y=i("el-button"),u=i("el-card");return V(),T(I,null,[a(u,null,{default:l(()=>[f("div",rt,[f("div",null,[a(r,{tag:"b"},{default:l(()=>t[4]||(t[4]=[d("Vendor Part Details")])),_:1,__:[4]}),t[5]||(t[5]=f("hr",null,null,-1))]),a(n,{class:"descriptions",column:1},{default:l(()=>[a(o,{label:"Part Name:"},{default:l(()=>[d(P(e.sparePartData.name),1)]),_:1}),a(o,{label:"Vendor:"},{default:l(()=>[d(P(e.vendorData.name),1)]),_:1})]),_:1}),a(h,{ref:"formRef",model:e.inputData,rules:e.rules,"label-width":"150px"},{default:l(()=>[k(" Code Input "),a(p,{style:{flex:"1"},label:"Ordering Code",prop:"order_code"},{default:l(()=>[a(b,{clearable:"",modelValue:e.inputData.order_code,"onUpdate:modelValue":t[0]||(t[0]=s=>e.inputData.order_code=s),placeholder:"Please input Ordering Code",style:{width:"99%"}},null,8,["modelValue"])]),_:1}),a(p,{style:{flex:"1"},label:"Unit Price",prop:"unit_price"},{default:l(()=>[a(b,{clearable:"",modelValue:e.inputData.unit_price,"onUpdate:modelValue":t[1]||(t[1]=s=>e.inputData.unit_price=s),placeholder:"Please Input Unit Price",style:{width:"99%"},type:"number"},null,8,["modelValue"])]),_:1}),k(" Category Input  "),a(p,{label:"Currency",prop:"price_uom_id"},{default:l(()=>[a(_,{modelValue:e.inputData.price_uom_id,"onUpdate:modelValue":t[2]||(t[2]=s=>e.inputData.price_uom_id=s),style:{width:"99%"}},{default:l(()=>[(V(!0),T(I,null,O(e.price_units,s=>(V(),U(m,{key:s.id,label:s.name,value:s.id},{default:l(()=>[d(P(s.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{style:{flex:"1"},label:"Lead Time (Days)",prop:"lead_time_days"},{default:l(()=>[a(b,{clearable:"",modelValue:e.inputData.lead_time_days,"onUpdate:modelValue":t[3]||(t[3]=s=>e.inputData.lead_time_days=s),placeholder:"Please Input Lead Time in Days",style:{width:"99%"},type:"number"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),k(" Submit Button  ")]),f("div",null,[a(p,null,{default:l(()=>[a(y,{onClick:e.addVendor,type:"primary"},{default:l(()=>t[6]||(t[6]=[d("Add Vendor")])),_:1,__:[6]})]),_:1})])]),_:1}),k(" <el-text>{{ existingVendors }}</el-text> ")],2112)}const st=E(nt,[["render",it],["__scopeId","data-v-3291bfeb"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Vendors/AddSPVendor.vue"]]),dt={__name:"VendorList",props:{data:Array,sparePart:Object},emits:["addVendor"],setup(D,{expose:t,emit:w}){t();const e=D,v=c([]),g=c(null),r=c(!1),o=c({keyword:null}),n=w,b=G(()=>new Set((e.data||[]).map(y=>y.id)));async function p(){const y=await fe(1,50,"name","ASC",o.value);console.log(o.value),v.value=y.data.content.filter(u=>!b.value.has(u.id))}S(()=>e.data,()=>{p()},{deep:!0}),p(),S(()=>o.value,()=>{p()},{deep:!0});function m(y){g.value=y,r.value=!0}function _(){r.value=!1,n("addVendor")}const h={props:e,vendors:v,selectedVendor:g,dialogVisible:r,search:o,emit:n,existingVendorIds:b,getAllVendorsData:p,handleEmit:m,handleAddVendor:_,ref:c,watch:S,computed:G,get searchVendors(){return fe},VendorCard:ye,AddSPVendor:st,get Search(){return ge}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},ut={class:"header"},ct={class:"card-scroll-container"};function _t(D,t,w,e,v,g){const r=i("el-input"),o=i("el-dialog"),n=i("el-col"),b=i("el-row"),p=i("el-card");return V(),T(I,null,[f("div",ut,[a(r,{modelValue:e.search.keyword,"onUpdate:modelValue":t[0]||(t[0]=m=>e.search.keyword=m),placeholder:"Search Vendor",style:{width:"240px"},size:"small","prefix-icon":e.Search,clearable:""},null,8,["modelValue","prefix-icon"])]),k(" <el-text>{{ search }}</el-text> "),a(o,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=m=>e.dialogVisible=m),title:"Add Parts Vendor",width:"800"},{default:l(()=>[a(e.AddSPVendor,{vendor:e.selectedVendor,sparePart:e.props.sparePart,onAddVendor:e.handleAddVendor},null,8,["vendor","sparePart"])]),_:1},8,["modelValue"]),a(p,null,{default:l(()=>[f("div",ct,[a(b,{gutter:0,style:{gap:"0.5rem"}},{default:l(()=>[(V(!0),T(I,null,O(e.vendors,m=>(V(),U(n,{key:m.id,xs:24,sm:24,md:24,lg:24},{default:l(()=>[a(e.VendorCard,{data:m,spData:null,onNew:_=>e.handleEmit(m)},null,8,["data","onNew"])]),_:2},1024))),128))]),_:1})])]),_:1})],64)}const mt=E(dt,[["render",_t],["__scopeId","data-v-93873d70"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Vendors/VendorList.vue"]]),pt={__name:"ConfirmDeletion",props:{data:Object},emits:["removeVendor","close"],setup(D,{expose:t,emit:w}){t();const e=D,v=c(e.data),g=w;S(()=>e.data,o=>{v.value=o},{deep:!0});const r={props:e,spVendor:v,emit:g,ref:c,watch:S,get Delete(){return $},get CircleClose(){return be}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},ft={class:"popup"},vt={class:"buttons"};function gt(D,t,w,e,v,g){const r=i("el-text"),o=i("el-button");return V(),T("div",ft,[a(r,{tag:"b",size:"large"},{default:l(()=>[d("Are you sure you want to remove this vendor: '"+P(e.spVendor.vendor.name)+"''",1)]),_:1}),f("div",vt,[a(o,{icon:e.Delete,type:"danger",onClick:t[0]||(t[0]=n=>e.emit("removeVendor",e.props.data))},{default:l(()=>t[2]||(t[2]=[d("Yes")])),_:1,__:[2]},8,["icon"]),a(o,{icon:e.CircleClose,type:"info",onClick:t[1]||(t[1]=n=>e.emit("close"))},{default:l(()=>t[3]||(t[3]=[d("No")])),_:1,__:[3]},8,["icon"])])])}const bt=E(pt,[["render",gt],["__scopeId","data-v-717ebc8e"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Vendors/ConfirmDeletion.vue"]]),yt={__name:"DeleteSPVendor",props:{spvData:Object,sparePart:Object},emits:["deletedVendor"],setup(D,{expose:t,emit:w}){t();const e=D,v=c([]),g=c([]);S([()=>e.spvData,()=>e.sparePart],([h,y])=>{var u;v.value=((u=y==null?void 0:y.spare_part_vendors)==null?void 0:u.map(s=>{var x,B;return{vendor_id:((x=s.vendor)==null?void 0:x.id)??null,order_code:s.order_code??null,lead_time_days:s.lead_time_days??null,unit_price:s.unit_price??null,price_uom_id:((B=s.price_uom)==null?void 0:B.id)??null}}))??[],g.value=v.value.filter(s=>s.vendor_id!=h.vendor.id)},{deep:!0,immediate:!0});const r=w,o=c(null),n=c(null),b=h=>{M({message:"Spare Part Vendor Removed: "+h,type:"success"})};function p(){n.value=e.spvData,o.value=!0}async function m(){const h=await H(e.sparePart.id,{code:e.sparePart.code,vendor_requests:g.value});h&&(r("deletedVendor",h.data),b(e.spvData.vendor.name),o.value=!1)}const _={props:e,existingVendors:v,removalRequest:g,emit:r,removeVendor:o,toRemove:n,vendorDeleted:b,deleteVendor:p,handleRemove:m,ref:c,watch:S,ConfirmDeletion:bt,get updateSparePart(){return H},get ElMessage(){return M}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},ht={class:"details-layout"};function Vt(D,t,w,e,v,g){const r=i("el-dialog"),o=i("el-descriptions-item"),n=i("el-descriptions"),b=i("el-button"),p=i("el-form-item"),m=i("el-card");return V(),T(I,null,[a(r,{style:{top:"20%"},width:"500",title:"Remove Vendor",modelValue:e.removeVendor,"onUpdate:modelValue":t[1]||(t[1]=_=>e.removeVendor=_)},{default:l(()=>[a(e.ConfirmDeletion,{data:e.toRemove,onRemoveVendor:e.handleRemove,onClose:t[0]||(t[0]=_=>e.removeVendor=!1)},null,8,["data"])]),_:1},8,["modelValue"]),a(m,null,{default:l(()=>[f("div",ht,[a(n,{class:"descriptions",column:2,"label-width":100,title:"Ordering"},{default:l(()=>[a(o,{width:"50%",label:"Ordering Code:"},{default:l(()=>[d(P(e.props.spvData.order_code),1)]),_:1}),a(o,{label:"Unit Price:"},{default:l(()=>[d(P(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.props.spvData.unit_price)),1)]),_:1}),a(o,{label:"Currency:"},{default:l(()=>[d(P(e.props.spvData.price_uom.name),1)]),_:1}),a(o,{label:"Lead Time:"},{default:l(()=>[d(P(e.props.spvData.lead_time_days)+" Days",1)]),_:1})]),_:1}),k(` <el-descriptions class="descriptions" :column="2" :label-width="100" title="Part">
        <el-descriptions-item width="50%" label="Part Name:">{{ props.spvData.name }}</el-descriptions-item>
        <el-descriptions-item label="Part Code:">{{ props.spvData.code }}</el-descriptions-item>
        <el-descriptions-item label="Reorder Point:">{{ props.spvData.reorder_point }}</el-descriptions-item>
        <el-descriptions-item label="Current Stock:">{{ props.spvData.current_stock }}</el-descriptions-item>
      </el-descriptions> `),a(n,{class:"descriptions",column:2,"label-width":100,title:"Vendor"},{default:l(()=>[a(o,{width:"50%",label:"Vendor:"},{default:l(()=>[d(P(e.props.spvData.vendor.name),1)]),_:1}),a(o,{label:"Phone:"},{default:l(()=>[d(P(e.props.spvData.vendor.phone_number),1)]),_:1}),a(o,{label:"Email:"},{default:l(()=>[d(P(e.props.spvData.vendor.email),1)]),_:1})]),_:1}),k(" Delete Button  ")]),f("div",null,[a(p,null,{default:l(()=>[a(b,{onClick:e.deleteVendor,type:"danger"},{default:l(()=>t[2]||(t[2]=[d("Remove Vendor")])),_:1,__:[2]})]),_:1})])]),_:1})],64)}const wt=E(yt,[["render",Vt],["__scopeId","data-v-2c4321c9"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Vendors/DeleteSPVendor.vue"]]),Dt={__name:"Vendors",props:{data:Object},emits:["refreshData"],setup(D,{expose:t,emit:w}){t();const e=D,v=w,g=c(!1),r=c(!1),o=c([]),n=c(null),b=c(null);S(()=>e.data,y=>{o.value=y.spare_part_vendors,n.value=o.value.map(u=>u.vendor)},{deep:!0});function p(){g.value=!1,v("refreshData")}function m(){r.value=!1,v("refreshData")}function _(y){b.value=y,r.value=!0}const h={props:e,emit:v,dialogVisible:g,viewDetails:r,currentVendors:o,vendorsOnly:n,spvData:b,handleAddVendor:p,handleDeleteVendor:m,handleEmit:_,ref:c,watch:S,VendorList:mt,VendorCard:ye,DeleteSPVendor:wt};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},Pt={class:"title"},kt={class:"card-scroll-container"};function xt(D,t,w,e,v,g){const r=i("el-dialog"),o=i("el-text"),n=i("el-button"),b=i("el-col"),p=i("el-row");return V(),T(I,null,[a(r,{modelValue:e.viewDetails,"onUpdate:modelValue":t[0]||(t[0]=m=>e.viewDetails=m),title:"Part Vendor Details",width:"800"},{default:l(()=>[a(e.DeleteSPVendor,{spvData:e.spvData,sparePart:e.props.data,onDeletedVendor:e.handleDeleteVendor},null,8,["spvData","sparePart"])]),_:1},8,["modelValue"]),f("div",Pt,[a(o,null,{default:l(()=>[d("Associated Vendors ("+P(e.currentVendors.length)+")",1)]),_:1}),a(n,{onClick:t[1]||(t[1]=m=>e.dialogVisible=!0)},{default:l(()=>t[3]||(t[3]=[d("Add Vendor")])),_:1,__:[3]})]),a(r,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=m=>e.dialogVisible=m),title:"Vendors",width:"800"},{default:l(()=>[a(e.VendorList,{onRemoval:D.handleRemoval,data:e.vendorsOnly,sparePart:e.props.data,onAddVendor:e.handleAddVendor},null,8,["onRemoval","data","sparePart"])]),_:1},8,["modelValue"]),f("div",kt,[a(p,{gutter:0,style:{gap:"0.5rem"}},{default:l(()=>[(V(!0),T(I,null,O(e.currentVendors,m=>(V(),U(b,{key:m.id,xs:24,sm:24,md:24,lg:24},{default:l(()=>[a(e.VendorCard,{data:m.vendor,spData:m,onExisting:_=>e.handleEmit(m)},null,8,["data","spData","onExisting"])]),_:2},1024))),128))]),_:1})])],64)}const Ct=E(Dt,[["render",xt],["__scopeId","data-v-2ebadae4"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Vendors/Vendors.vue"]]),Tt={__name:"NewSparePart",emits:["createPart"],setup(D,{expose:t,emit:w}){t();const e=c(null),v=c(),g=w,r=c([]),o=c([]),n=c([]),b=c([{id:1,name:"FPS"}]),p=c([]);async function m(){const N=await Y(),j=await Q(15);r.value=N.data,p.value=j.data}m();const _=c({id:null,name:null,spare_parts_class_id:null,description:null,code:null,priority:null,quantity_uom_id:null,image_list:[],file_list:[],reorder_point:0,maximum_stock_level:1,minimum_stock_level:0,current_stock:0,universal_code:null,status:1,inventory_requests:[],manufacturer_id:null}),h=L({name:[{required:!0,message:"Please input Request Title",trigger:"blur"}],description:[{required:!0,message:"Please fill in Description",trigger:"blur"}],code:[{required:!0,message:"Please enter Material Code",trigger:"blur"}],universal_code:[{required:!0,message:"Please enter Material Code",trigger:"blur"}],spare_parts_class_id:[{required:!0,message:"Please select Category",trigger:"blur"}],manufacturer_id:[{required:!0,message:"Please select Manufacturer>",trigger:"blur"}],quantity_uom_id:[{required:!0,message:"Please select Units>",trigger:"blur"}],current_stock:[{required:!0,message:"Please enter Current Stock",trigger:"blur"}],minimum_stock_level:[{required:!0,message:"Please enter Min Stock",trigger:"blur"}],maximum_stock_level:[{required:!0,message:"Please enter Max Stock",trigger:"blur"}],reorder_point:[{required:!0,message:"Please enter Reorder Point",trigger:"blur"}]}),y=N=>{o.value=N,_.value.image_list=N},u=N=>{n.value=N,_.value.file_list=N},s=async()=>{try{let N=[];if(_.value.image_list.length>0&&(N=(await K(_.value.image_list)).data.uploadedFiles||[],_.value.image_list=N.map(F=>F.url)),_.value.file_list.length>0){const j=await K(_.value.file_list);n.value=j.data.uploadedFiles||[],_.value.file_list=n.value.map(F=>F.url)}return{uploadedImages:N}}catch{throw new Error("File upload failed")}},x=N=>{M({message:"Part Created: "+N,type:"success"})},B=async()=>{e.value&&(await s(),await e.value.validate((N,j)=>{N&&(console.log("Part created: ",_.value),g("createPart",ne(_.value)),x(_.value.name),A())}))},A=()=>{e.value&&e.value.resetFields()},q={formRef:e,ruleFormRef:v,emit:g,sparePartClasses:r,uploadedImages:o,uploadedFiles:n,manufacturers:b,units:p,getAllData:m,inputData:_,rules:h,handleImageListUpdate:y,handleFilesListUpdate:u,uploadFilesToServer:s,partCreated:x,createPart:B,resetForm:A,ref:c,reactive:L,get getAllSparePartClasses(){return Y},get createSparePart(){return ne},get getUnitByType(){return Q},get ElMessage(){return M},get uploadMultipleToMinio(){return K},FileUploadMultiple:ae};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}},St={class:"details-layout"},Ut={class:"form-section"},Bt={class:"form-section"},It={class:"form-section"},qt={class:"displays"},Lt={class:"form-section"},Nt={class:"form-section"};function At(D,t,w,e,v,g){const r=i("el-text"),o=i("el-input"),n=i("el-form-item"),b=i("el-option"),p=i("el-select"),m=i("el-input-number"),_=i("el-form"),h=i("el-button"),y=i("el-card");return V(),U(y,null,{default:l(()=>[f("div",St,[f("div",null,[a(r,{tag:"b"},{default:l(()=>t[12]||(t[12]=[d("General Details")])),_:1,__:[12]}),t[13]||(t[13]=f("hr",null,null,-1))]),a(_,{ref:"formRef",model:e.inputData,rules:e.rules,"label-width":"120px"},{default:l(()=>[a(n,{style:{flex:"1"},label:"Part Name",prop:"name"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.name,"onUpdate:modelValue":t[0]||(t[0]=u=>e.inputData.name=u),placeholder:"Please input Part Name",style:{width:"99%"}},null,8,["modelValue"])]),_:1}),k(" Category Input  "),a(n,{label:"Category",prop:"spare_parts_class_id"},{default:l(()=>[a(p,{modelValue:e.inputData.spare_parts_class_id,"onUpdate:modelValue":t[1]||(t[1]=u=>e.inputData.spare_parts_class_id=u),style:{width:"99%"}},{default:l(()=>[(V(!0),T(I,null,O(e.sparePartClasses,u=>(V(),U(b,{key:u.id,label:u.name,value:u.id},{default:l(()=>[d(P(u.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),k(" Manufactuer Input  "),a(n,{label:"Manufacturer",prop:"manufacturer_id"},{default:l(()=>[a(p,{modelValue:e.inputData.manufacturer_id,"onUpdate:modelValue":t[2]||(t[2]=u=>e.inputData.manufacturer_id=u),style:{width:"99%"}},{default:l(()=>[(V(!0),T(I,null,O(e.manufacturers,u=>(V(),U(b,{key:u.id,label:u.name,value:u.id},{default:l(()=>[d(P(u.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),k(" Description Input "),a(n,{label:"Description",prop:"description"},{default:l(()=>[a(o,{modelValue:e.inputData.description,"onUpdate:modelValue":t[3]||(t[3]=u=>e.inputData.description=u),style:{width:"99%"},rows:3,type:"textarea",placeholder:"Please Describe the Issue"},null,8,["modelValue"])]),_:1}),a(r,{tag:"b"},{default:l(()=>t[14]||(t[14]=[d("Specifications")])),_:1,__:[14]}),t[18]||(t[18]=f("hr",null,null,-1)),k(" Code Inputs "),f("div",Ut,[a(n,{label:"Material Code",prop:"code"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.code,"onUpdate:modelValue":t[4]||(t[4]=u=>e.inputData.code=u),placeholder:"Please input Material Code",style:{width:"99%"}},null,8,["modelValue"])]),_:1})]),f("div",Bt,[a(n,{label:"Inventory Code",prop:"universal_code"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.universal_code,"onUpdate:modelValue":t[5]||(t[5]=u=>e.inputData.universal_code=u),placeholder:"Please input Inventory Code",style:{width:"99%"}},null,8,["modelValue"])]),_:1})]),f("div",It,[a(n,{label:"Units",prop:"quantity_uom_id"},{default:l(()=>[a(p,{modelValue:e.inputData.quantity_uom_id,"onUpdate:modelValue":t[6]||(t[6]=u=>e.inputData.quantity_uom_id=u),style:{width:"99%"}},{default:l(()=>[(V(!0),T(I,null,O(e.units,u=>(V(),U(b,{key:u.id,label:u.name,value:u.id},{default:l(()=>[d(P(u.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),k(" Inventory Details Inputs "),f("div",qt,[a(r,{tag:"b"},{default:l(()=>t[15]||(t[15]=[d("Stock Keeping")])),_:1,__:[15]}),t[16]||(t[16]=f("hr",null,null,-1)),f("div",Lt,[a(n,{label:"Min Stock",prop:"minimum_stock_level"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.minimum_stock_level,"onUpdate:modelValue":t[7]||(t[7]=u=>e.inputData.minimum_stock_level=u),placeholder:"Please input Min Stock",precision:1,step:1,min:0,max:e.inputData.maximum_stock_level,style:{width:"98%"}},null,8,["modelValue","max"])]),_:1}),a(n,{label:"Max Stock",prop:"maximum_stock_level"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.maximum_stock_level,"onUpdate:modelValue":t[8]||(t[8]=u=>e.inputData.maximum_stock_level=u),placeholder:"Please input Max Stock",precision:1,step:1,min:e.inputData.minimum_stock_level,style:{width:"98%"}},null,8,["modelValue","min"])]),_:1})]),f("div",Nt,[a(n,{label:"Current Stock",prop:"current_stock"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.current_stock,"onUpdate:modelValue":t[9]||(t[9]=u=>e.inputData.current_stock=u),placeholder:"Please input Current Stock",precision:1,step:1,min:0,style:{width:"98%"}},null,8,["modelValue"])]),_:1}),a(n,{label:"Reorder Point",prop:"reorder_point"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.reorder_point,"onUpdate:modelValue":t[10]||(t[10]=u=>e.inputData.reorder_point=u),placeholder:"Please input Reorder Point",precision:1,step:1,min:e.inputData.minimum_stock_level,max:e.inputData.maximum_stock_level,style:{width:"98%"}},null,8,["modelValue","min","max"])]),_:1})])]),a(r,{tag:"b"},{default:l(()=>t[17]||(t[17]=[d("Upload Image(s)")])),_:1,__:[17]}),t[19]||(t[19]=f("hr",null,null,-1)),a(e.FileUploadMultiple,{"onUpdate:imageList":e.handleImageListUpdate,"onUpdate:fileList":e.handleFilesListUpdate,"upload-type":"both","max-images":5,"max-files":5})]),_:1,__:[18,19]},8,["model","rules"]),k(" Submit Button  ")]),f("div",{class:"submit-button",onClick:t[11]||(t[11]=u=>e.createPart(e.ruleFormRef))},[a(n,null,{default:l(()=>[a(h,{type:"primary"},{default:l(()=>t[20]||(t[20]=[d("Create Spare Part")])),_:1,__:[20]})]),_:1})])]),_:1})}const Et=E(Tt,[["render",At],["__scopeId","data-v-a18bd35a"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/NewSparePart.vue"]]),Mt={__name:"EditSparePart",props:{data:Object},emits:["updatePart","cancel"],setup(D,{expose:t,emit:w}){t();const e=D,v=c(),g=w,r=c([]),o=c([{id:1,name:"FPS"}]),n=c([]);async function b(){const u=await Y(),s=await Q(15);r.value=u.data,n.value=s.data}b();const p=c({id:e.data.id,name:e.data.name,spare_parts_class_id:e.data.spare_parts_class.id,description:e.data.description,code:e.data.code,priority:null,quantity_uom_id:e.data.quantity_uom.id,image_list:e.data.image_list,file_list:e.data.file_list,reorder_point:e.data.reorder_point,maximum_stock_level:e.data.maximum_stock_level,minimum_stock_level:e.data.minimum_stock_level,current_stock:e.data.current_stock,universal_code:e.data.universal_code,status:1,inventory_requests:[],manufacturer_id:e.data.manufacturer.id}),m=L({name:[{required:!0,message:"Please input Request Title",trigger:"blur"}],description:[{required:!0,message:"Please fill in Description",trigger:"change"}],code:[{required:!0,message:"Please enter Material Code",trigger:"change"}],universal_code:[{required:!0,message:"Please enter Material Code",trigger:"change"}],spare_parts_class_id:[{required:!0,message:"Please select Category",trigger:"change"}],manufacturer_id:[{required:!0,message:"Please select Manufacturer>",trigger:"change"}],quantity_uom_id:[{required:!0,message:"Please select Units>",trigger:"change"}],current_stock:[{required:!0,message:"Please enter Current Stock",trigger:"change"}],minimum_stock_level:[{required:!0,message:"Please enter Min Stock",trigger:"change"}],maximum_stock_level:[{required:!0,message:"Please enter Max Stock",trigger:"change"}],reorder_point:[{required:!0,message:"Please enter Reorder Point",trigger:"change"}]}),_=u=>{M({message:"Part Updated: "+u,type:"success"})},y={props:e,ruleFormRef:v,emit:g,sparePartClasses:r,manufacturers:o,units:n,getAllData:b,inputData:p,rules:m,partEdited:_,updatePart:async u=>{u&&await u.validate((s,x)=>{s&&(g("updatePart",H(p.value.id,p.value)),_(p.value.name))})},ref:c,reactive:L,get getAllSparePartClasses(){return Y},get updateSparePart(){return H},get getUnitByType(){return Q},get Finished(){return Pe},get Close(){return De},get ElMessage(){return M},FileUploadMultiple:ae};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},Ot={class:"details-layout"},Rt={class:"form-section"},Ft={class:"form-section"},jt={class:"form-section"},zt={class:"displays"},Ht={class:"form-section"},Qt={class:"form-section"},Gt={class:"submit-button"};function Kt(D,t,w,e,v,g){const r=i("el-text"),o=i("el-input"),n=i("el-form-item"),b=i("el-option"),p=i("el-select"),m=i("el-input-number"),_=i("el-form"),h=i("el-icon"),y=i("el-button"),u=i("el-card");return V(),T(I,null,[f("div",null,[a(u,null,{default:l(()=>[a(r,{tag:"b",size:"large"},{default:l(()=>t[13]||(t[13]=[d("Edit Spare Part")])),_:1,__:[13]}),f("div",Ot,[f("div",null,[a(r,{tag:"b"},{default:l(()=>t[14]||(t[14]=[d("General Details")])),_:1,__:[14]}),t[15]||(t[15]=f("hr",null,null,-1))]),a(_,{ref:"ruleFormRef",model:e.inputData,rules:e.rules,"label-width":"120px"},{default:l(()=>[a(n,{style:{flex:"1"},label:"Part Name",prop:"name"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.inputData.name=s),placeholder:"Please input Part Name",style:{width:"98%"}},null,8,["modelValue"])]),_:1}),k(" Category Input  "),a(n,{label:"Category",prop:"spare_parts_class_id"},{default:l(()=>[a(p,{modelValue:e.inputData.spare_parts_class_id,"onUpdate:modelValue":t[1]||(t[1]=s=>e.inputData.spare_parts_class_id=s),style:{width:"98%"}},{default:l(()=>[(V(!0),T(I,null,O(e.sparePartClasses,s=>(V(),U(b,{key:s.id,label:s.name,value:s.id},{default:l(()=>[d(P(s.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),k(" Manufactuer Input  "),a(n,{label:"Manufacturer",prop:"manufacturer_id"},{default:l(()=>[a(p,{modelValue:e.inputData.manufacturer_id,"onUpdate:modelValue":t[2]||(t[2]=s=>e.inputData.manufacturer_id=s),style:{width:"98%"}},{default:l(()=>[(V(!0),T(I,null,O(e.manufacturers,s=>(V(),U(b,{key:s.id,label:s.name,value:s.id},{default:l(()=>[d(P(s.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),k(" Description Input "),a(n,{label:"Description",prop:"description"},{default:l(()=>[a(o,{modelValue:e.inputData.description,"onUpdate:modelValue":t[3]||(t[3]=s=>e.inputData.description=s),style:{width:"98%"},rows:3,type:"textarea",placeholder:"Please Describe the Issue"},null,8,["modelValue"])]),_:1}),a(r,{tag:"b"},{default:l(()=>t[16]||(t[16]=[d("Specifications")])),_:1,__:[16]}),t[20]||(t[20]=f("hr",null,null,-1)),k(" Code Inputs "),f("div",Rt,[a(n,{label:"Material Code",prop:"code"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.code,"onUpdate:modelValue":t[4]||(t[4]=s=>e.inputData.code=s),placeholder:"Please input Material Code",style:{width:"98%"}},null,8,["modelValue"])]),_:1})]),f("div",Ft,[a(n,{label:"Inventory Code",prop:"universal_code"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.universal_code,"onUpdate:modelValue":t[5]||(t[5]=s=>e.inputData.universal_code=s),placeholder:"Please input Inventory Code",style:{width:"98%"}},null,8,["modelValue"])]),_:1})]),f("div",jt,[a(n,{label:"Units",prop:"quantity_uom_id"},{default:l(()=>[a(p,{modelValue:e.inputData.quantity_uom_id,"onUpdate:modelValue":t[6]||(t[6]=s=>e.inputData.quantity_uom_id=s),style:{width:"98%"}},{default:l(()=>[(V(!0),T(I,null,O(e.units,s=>(V(),U(b,{key:s.id,label:s.name,value:s.id},{default:l(()=>[d(P(s.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),k(" Inventory Details Inputs "),f("div",zt,[a(r,{tag:"b"},{default:l(()=>t[17]||(t[17]=[d("Stock Keeping")])),_:1,__:[17]}),t[18]||(t[18]=f("hr",null,null,-1)),f("div",Ht,[a(n,{label:"Min Stock",prop:"minimum_stock_level"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.minimum_stock_level,"onUpdate:modelValue":t[7]||(t[7]=s=>e.inputData.minimum_stock_level=s),placeholder:"Please input Min Stock",precision:1,step:1,min:0,max:e.inputData.maximum_stock_level,style:{width:"98%"}},null,8,["modelValue","max"])]),_:1}),a(n,{label:"Max Stock",prop:"maximum_stock_level"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.maximum_stock_level,"onUpdate:modelValue":t[8]||(t[8]=s=>e.inputData.maximum_stock_level=s),placeholder:"Please input Max Stock",precision:1,step:1,min:e.inputData.minimum_stock_level,style:{width:"98%"}},null,8,["modelValue","min"])]),_:1})]),f("div",Qt,[a(n,{label:"Current Stock",prop:"current_stock"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.current_stock,"onUpdate:modelValue":t[9]||(t[9]=s=>e.inputData.current_stock=s),placeholder:"Please input Current Stock",precision:1,step:1,min:0,style:{width:"98%"}},null,8,["modelValue"])]),_:1}),a(n,{label:"Reorder Point",prop:"reorder_point"},{default:l(()=>[a(m,{clearable:"",modelValue:e.inputData.reorder_point,"onUpdate:modelValue":t[10]||(t[10]=s=>e.inputData.reorder_point=s),placeholder:"Please input Reorder Point",precision:1,step:1,min:e.inputData.minimum_stock_level,max:e.inputData.maximum_stock_level,style:{width:"98%"}},null,8,["modelValue","min","max"])]),_:1})])]),a(r,{tag:"b"},{default:l(()=>t[19]||(t[19]=[d("Upload Image(s)")])),_:1,__:[19]}),t[21]||(t[21]=f("hr",null,null,-1)),a(e.FileUploadMultiple,{"onUpdate:imageList":D.handleImageListUpdate,"onUpdate:fileList":D.handleFilesListUpdate,"upload-type":"both","max-images":5,"max-files":5},null,8,["onUpdate:imageList","onUpdate:fileList"])]),_:1,__:[20,21]},8,["model","rules"])]),k(" Buttons "),f("div",Gt,[a(n,null,{default:l(()=>[a(y,{type:"primary",onClick:t[11]||(t[11]=s=>e.updatePart(e.ruleFormRef))},{default:l(()=>[a(h,null,{default:l(()=>[a(e.Finished)]),_:1}),t[22]||(t[22]=d("Save"))]),_:1,__:[22]})]),_:1}),a(n,null,{default:l(()=>[a(y,{type:"info",onClick:t[12]||(t[12]=()=>e.emit("cancel"))},{default:l(()=>[a(h,null,{default:l(()=>[a(e.Close)]),_:1}),t[23]||(t[23]=d("Cancel"))]),_:1,__:[23]})]),_:1})])]),_:1})]),k(" <h1>{{ inputData }}</h1> "),f("h1",null,P(e.inputData.image_path),1)],64)}const Wt=E(Mt,[["render",Kt],["__scopeId","data-v-8829af4f"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/EditSparePart.vue"]]),Yt={__name:"BatchCard",props:{data:Object,addStock:Number},setup(D,{expose:t}){t();const w=D,e=c(w.data),v=c(null);async function g(){const o=await ve(e.value.location_id);v.value=o.data}g(),S(()=>w.data,o=>{e.value=o,g()},{deep:!0});const r={props:w,batch:e,locationTree:v,getLocationTreeData:g,get convertToLocalTime(){return te},ref:c,watch:S,get getLocationPathById(){return ve}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Zt={class:"main-card"},Jt={class:"left-container"},Xt={class:"description-container"},$t={class:"middle-container"};function ea(D,t,w,e,v,g){const r=i("el-text"),o=i("el-descriptions-item"),n=i("el-descriptions"),b=i("el-breadcrumb-item"),p=i("el-breadcrumb");return V(),T("div",Zt,[f("div",Jt,[f("div",null,[a(r,{type:"primary"},{default:l(()=>[d("Batch ID: #"+P(e.batch.id),1)]),_:1})]),f("div",Xt,[a(n,{column:1,direction:"horizontal",labelWidth:"105px"},{default:l(()=>[a(o,{label:"Batch Number:"},{default:l(()=>[d(P(e.batch.batch_number),1)]),_:1}),a(o,{label:"Created At:"},{default:l(()=>[d(P(e.convertToLocalTime(e.batch.created_at)),1)]),_:1}),e.batch.updated_at?(V(),U(o,{key:0,label:"Last Updated At:"},{default:l(()=>[d(P(e.convertToLocalTime(e.batch.updated_at)),1)]),_:1})):k("v-if",!0)]),_:1})])]),f("div",$t,[a(n,{column:2,direction:"vertical",style:{"max-width":"25vw"}},{default:l(()=>[a(o,{label:"Batch Size",width:"10vw"},{default:l(()=>[d(P(e.props.addStock?e.batch.unit_in_stock+" (+"+e.props.addStock+")":e.batch.unit_in_stock),1)]),_:1}),a(o,{label:"Location"},{default:l(()=>[a(p,null,{default:l(()=>[(V(!0),T(I,null,O(e.locationTree,m=>(V(),U(b,{key:m.id},{default:l(()=>[d(P(m.name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])])}const he=E(Yt,[["render",ea],["__scopeId","data-v-63192696"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Batches/BatchCard.vue"]]),ta={__name:"BatchTransfer",props:{data:Object,batches:Object},emits:["transfer"],setup(D,{expose:t,emit:w}){t();const e=D,v=w,g=c(e.batches.filter(s=>s.id!==e.data.id));console.log(g.value);const r=c(null),o=c(e.data),n=c(null),b=c(null),p=L({transfer_from_id:e.data.id,transfer_to_id:n,quantity:1,transfer_date:null,remark:null,transaction_type_id:104}),m=L({transfer_to_id:[{required:!0,message:"Please select transfer target",trigger:"blur"}],quantity:[{required:!0,message:"Please enter in transfer quantity",trigger:"blur"}],transfer_date:[{required:!0,message:"Please select in transfer date",trigger:"blur"}]});function _(s){return s.getTime()<Date.now()-864e5}S(n,s=>{b.value=g.value.find(x=>x.id===s)||null});async function h(){const s=await re(p);v("transfer",s),y()}const y=()=>{r.value&&r.value.resetFields()},u={props:e,emit:v,localBatches:g,formRef:r,batch:o,selectedBatchId:n,selectedBatch:b,form:p,rules:m,disablePastDates:_,confirmTransfer:h,resetForm:y,ref:c,watch:S,reactive:L,BatchCard:he,get transferInventory(){return re}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},aa={class:"main"},la={class:"main-div"},oa={key:0};function na(D,t,w,e,v,g){const r=i("el-text"),o=i("el-card"),n=i("el-option"),b=i("el-select"),p=i("el-form-item"),m=i("el-input-number"),_=i("el-date-picker"),h=i("el-input"),y=i("el-form"),u=i("el-button");return V(),T(I,null,[f("div",aa,[a(o,null,{default:l(()=>[f("div",la,[f("div",null,[a(r,{size:"large",tag:"b"},{default:l(()=>t[4]||(t[4]=[d("FROM")])),_:1,__:[4]})]),a(o,null,{default:l(()=>[a(e.BatchCard,{data:e.batch},null,8,["data"])]),_:1}),f("div",null,[a(y,{ref:"formRef",rules:e.rules,"label-width":"150px"},{default:l(()=>[a(p,{label:"Transfer to",prop:"transfer_to_id"},{default:l(()=>[a(b,{modelValue:e.selectedBatchId,"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedBatchId=s),placeholder:"Select Batch",style:{width:"50%"}},{default:l(()=>[(V(!0),T(I,null,O(e.localBatches,s=>(V(),U(n,{key:s.id,label:`#${s.id}/${s.batch_number}/L${s.location_id}`,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"Transfer Quantity",prop:"quantity"},{default:l(()=>[a(m,{clearable:"",modelValue:e.form.quantity,"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.quantity=s),placeholder:"Please input Transfer Quantity",step:1,max:e.batch.unit_in_stock,min:1,style:{width:"50%"}},null,8,["modelValue","max"])]),_:1}),a(p,{label:"Transfer Date",prop:"transfer_date"},{default:l(()=>[a(_,{modelValue:e.form.transferDate,"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.transferDate=s),type:"datetime",placeholder:"Select date and time",style:{width:"50%"},"disabled-date":e.disablePastDates},null,8,["modelValue"])]),_:1}),a(p,{label:"Remark"},{default:l(()=>[a(h,{modelValue:e.form.remark,"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.remark=s),type:"textarea",placeholder:"Transfer Remarks",style:{width:"50%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])]),e.selectedBatch?(V(),T("div",oa,[a(r,{size:"large",tag:"b"},{default:l(()=>t[5]||(t[5]=[d("TO")])),_:1,__:[5]})])):k("v-if",!0),e.selectedBatch?(V(),U(o,{key:1},{default:l(()=>[a(e.BatchCard,{data:e.selectedBatch,addStock:e.form.quantity},null,8,["data","addStock"])]),_:1})):k("v-if",!0),f("div",null,[a(u,{type:"primary",onClick:e.confirmTransfer},{default:l(()=>t[6]||(t[6]=[d("Confirm Transfer")])),_:1,__:[6]})])])]),_:1})]),k(" <el-text>{{ form }}</el-text> ")],2112)}const ra=E(ta,[["render",na],["__scopeId","data-v-4e7914d1"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Batches/BatchTransfer.vue"]]),ia={__name:"NewBatch",props:{sparePart:Object},emits:["newBatch"],setup(D,{expose:t,emit:w}){t();const e=D,v=L(null),g=c([]),r=w,o=c(null),n=L({location_id:null,unit_in_stock:0,material_id:e.sparePart.id,inventory_type_id:3,batch_number:null}),b=L({location_id:[{required:!0,message:"Please select location",trigger:"blur"}],batch_number:[{required:!0,message:"Please enter batch number",trigger:"blur"}]});async function p(){const s=await X();g.value=s.data,console.log(g.value)}p(),S(()=>n.location_id,async s=>{const x=await J(s);o.value=x.data});const m={children:"children",label:"name"},_=s=>{n.location_id=s.id,console.log(n.location_id)};async function h(){const s=await ie(n);r("newBatch",s),y()}const y=()=>{v&&v.resetFields()},u={props:e,formRef:v,locations:g,emit:r,selectedLocation:o,form:n,rules:b,getLocationData:p,defaultProps:m,handleNodeClick:_,createBatch:h,resetForm:y,ref:c,reactive:L,watch:S,get getLocationTree(){return X},get getLocationById(){return J},get createInventory(){return ie}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},sa={class:"main-container-b"};function da(D,t,w,e,v,g){const r=i("el-text"),o=i("el-input"),n=i("el-form-item"),b=i("el-tree"),p=i("el-form"),m=i("el-button"),_=i("el-card");return V(),U(_,null,{default:l(()=>[f("div",sa,[f("div",null,[a(r,null,{default:l(()=>[d("Part Name: "+P(e.props.sparePart.name),1)]),_:1})]),a(p,{ref:"formRef",rules:e.rules},{default:l(()=>[a(n,{label:"Batch Number:",prop:"batch_number"},{default:l(()=>[a(o,{modelValue:e.form.batch_number,"onUpdate:modelValue":t[0]||(t[0]=h=>e.form.batch_number=h)},null,8,["modelValue"])]),_:1}),e.selectedLocation?(V(),U(n,{key:0,label:"Current Selection:",style:{"font-weight":"bold"}},{default:l(()=>[a(r,null,{default:l(()=>[d(P(e.selectedLocation.name),1)]),_:1})]),_:1})):k("v-if",!0),a(n,{label:"Location:",prop:"location_id"},{default:l(()=>[a(b,{style:{"max-width":"600px"},data:e.locations,props:e.defaultProps,onNodeClick:e.handleNodeClick},null,8,["data"])]),_:1})]),_:1},8,["rules"]),a(m,{onClick:e.createBatch,type:"primary"},{default:l(()=>t[1]||(t[1]=[d("Create")])),_:1,__:[1]})])]),_:1})}const ua=E(ia,[["render",da],["__scopeId","data-v-5d29c5b5"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Batches/NewBatch.vue"]]),ca={__name:"EditBatch",props:{sparePart:Object,data:Object},emits:["updateBatch"],setup(D,{expose:t,emit:w}){t();const e=D,v=c(null),g=c([]),r=w,o=c(null),n=L({location_id:null,unit_in_stock:null,material_id:e.sparePart.id,inventory_type_id:3,batch_number:null}),b=L({location_id:[{required:!0,message:"Please select location",trigger:"blur"}],batch_number:[{required:!0,message:"Please enter batch number",trigger:"blur"}],unit_in_stock:[{required:!0,message:"Please enter units in stock",trigger:"blur"}]});async function p(){const x=await X();g.value=x.data,console.log(g.value)}z(async()=>{await p(),console.log("IN THE ON MOUNT"),n.batch_number=e.data.batch_number,n.location_id=e.data.location_id,n.unit_in_stock=e.data.unit_in_stock}),S(()=>e.data,async x=>{n.batch_number=x.batch_number,n.location_id=x.location_id,n.unit_in_stock=x.unit_in_stock},{deep:!0}),S(()=>n.location_id,async x=>{if(x){const B=await J(x);o.value=B.data}});const m={children:"children",label:"name"},_=x=>{n.location_id=x.id,console.log(n.location_id)},h=x=>{M.error(x)};async function y(){try{const x=await se(e.data.id,n);console.log(x),r("updateBatch",x),u()}catch(x){console.error("Error updating batch:",x.message),h(x.message)}}const u=()=>{v.value&&v.value.resetFields()},s={props:e,formRef:v,locations:g,emit:r,selectedLocation:o,form:n,rules:b,getLocationData:p,defaultProps:m,handleNodeClick:_,failedUpdate:h,updateBatch:y,resetForm:u,ref:c,reactive:L,onMounted:z,watch:S,get getLocationById(){return J},get getLocationTree(){return X},get updateInventory(){return se},get ElMessage(){return M}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},_a={class:"main-container-b"};function ma(D,t,w,e,v,g){const r=i("el-text"),o=i("el-input"),n=i("el-form-item"),b=i("el-tree"),p=i("el-form"),m=i("el-button"),_=i("el-card");return V(),T(I,null,[a(_,null,{default:l(()=>[f("div",_a,[f("div",null,[a(r,{tag:"b"},{default:l(()=>[d("Part Name: "+P(e.props.sparePart.name),1)]),_:1})]),a(p,{ref:"formRef",rules:e.rules},{default:l(()=>[a(n,{label:"Batch Number:",prop:"batch_number"},{default:l(()=>[a(o,{modelValue:e.form.batch_number,"onUpdate:modelValue":t[0]||(t[0]=h=>e.form.batch_number=h)},null,8,["modelValue"])]),_:1}),a(n,{label:"Units in Stock:",prop:"unit_in_stock"},{default:l(()=>[a(o,{type:"number",modelValue:e.form.unit_in_stock,"onUpdate:modelValue":t[1]||(t[1]=h=>e.form.unit_in_stock=h),min:"0"},null,8,["modelValue"])]),_:1}),e.selectedLocation?(V(),U(n,{key:0,label:"Current Selection:",style:{"font-weight":"bold"}},{default:l(()=>[a(r,null,{default:l(()=>[d(P(e.selectedLocation.name),1)]),_:1})]),_:1})):k("v-if",!0),a(n,{label:"Location:",prop:"location_id"},{default:l(()=>[a(b,{style:{"max-width":"600px"},data:e.locations,props:e.defaultProps,onNodeClick:e.handleNodeClick},null,8,["data"])]),_:1})]),_:1},8,["rules"]),a(m,{onClick:e.updateBatch,type:"primary"},{default:l(()=>t[2]||(t[2]=[d("Update")])),_:1,__:[2]})])]),_:1}),k(" <el-text>{{ form }}</el-text> ")],2112)}const pa=E(ca,[["render",ma],["__scopeId","data-v-e963e05f"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Batches/EditBatch.vue"]]),fa={__name:"Batches",props:{sparePart:Object},setup(D,{expose:t}){t();const w=D,e=c(!1),v=c(!1),g=c(!1),r=c([]),o=c({material_type_id:3,material_id:null});async function n(){const q=await de(1,20,"id","ASC",o.value);r.value=q.data.content}n(),S(()=>w.sparePart,q=>{o.value.material_id=q.id,n()},{deep:!0});const b=()=>{M({message:"Batch Created",type:"success"})},p=()=>{M({message:"Inventory Transferred",type:"success"})},m=()=>{M({message:"Inventory Updated",type:"success"})},_=c(null);S(()=>r.value,q=>{_.value=r.value[0]},{deep:!0});function h(q){_.value=q,console.log(_.value),g.value=!0}function y(q){_.value=q,console.log(_.value),e.value=!0}function u(q){_.value=q,v.value=!0}function s(q){v.value=!1,b(),n()}function x(q){e.value=!1,p(),n()}function B(q){g.value=!1,m(),n()}const A={props:w,dialogVisible:e,newBatchVisible:v,editVisible:g,batches:r,search:o,getInventory:n,batchSubmitted:b,batchTransfered:p,batchUpdated:m,selectedBatch:_,updateBatch:h,transferBatch:y,newBatch:u,handleNewBatch:s,handleTransfer:x,hanldeUpdateBatch:B,ref:c,watch:S,get DArrowRight(){return ke},get EditPen(){return ee},BatchCard:he,BatchTransfer:ra,NewBatch:ua,get ElMessage(){return M},get searchInventory(){return de},EditBatch:pa};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},va={class:"title"},ga={class:"main-container-b"},ba={class:"outer"},ya={class:"button-container"};function ha(D,t,w,e,v,g){const r=i("el-text"),o=i("el-button"),n=i("el-icon"),b=i("el-card"),p=i("el-col"),m=i("el-row"),_=i("el-dialog");return V(),T(I,null,[f("div",va,[a(r,null,{default:l(()=>[d("Associated Batches ("+P(e.batches.length)+")",1)]),_:1}),a(o,{onClick:t[0]||(t[0]=h=>e.newBatch(D.b))},{default:l(()=>t[4]||(t[4]=[d("New Batch")])),_:1,__:[4]})]),f("div",ga,[a(m,{gutter:0,style:{gap:"0.5rem"}},{default:l(()=>[(V(!0),T(I,null,O(e.batches,h=>(V(),U(p,{key:h.id,xs:24,sm:24,md:24,lg:24},{default:l(()=>[a(b,null,{default:l(()=>[f("div",ba,[a(e.BatchCard,{data:h},null,8,["data"]),f("div",ya,[f("div",null,[a(o,{icon:e.EditPen,type:"success",onClick:y=>e.updateBatch(h)},{default:l(()=>[...t[5]||(t[5]=[d("Edit")])]),_:2,__:[5]},1032,["icon","onClick"])]),f("div",null,[a(o,{onClick:y=>e.transferBatch(h),type:"primary"},{default:l(()=>[t[6]||(t[6]=d("Transfer ")),a(n,null,{default:l(()=>[a(e.DArrowRight)]),_:1})]),_:2,__:[6]},1032,["onClick"])])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(_,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=h=>e.dialogVisible=h),title:"Transfer Batch",width:"1000",top:"5vh"},{default:l(()=>[(V(),U(e.BatchTransfer,{batches:e.batches,data:e.selectedBatch,key:e.selectedBatch.id,onTransfer:e.handleTransfer},null,8,["batches","data"]))]),_:1},8,["modelValue"]),a(_,{modelValue:e.newBatchVisible,"onUpdate:modelValue":t[2]||(t[2]=h=>e.newBatchVisible=h),title:"New Batch",width:"700"},{default:l(()=>[a(e.NewBatch,{sparePart:e.props.sparePart,onNewBatch:e.handleNewBatch},null,8,["sparePart"])]),_:1},8,["modelValue"]),a(_,{modelValue:e.editVisible,"onUpdate:modelValue":t[3]||(t[3]=h=>e.editVisible=h),title:"Edit Batch",width:"700"},{default:l(()=>[a(e.EditBatch,{sparePart:e.props.sparePart,data:e.selectedBatch,onUpdateBatch:e.hanldeUpdateBatch},null,8,["sparePart","data"])]),_:1},8,["modelValue"])])],64)}const Va=E(fa,[["render",ha],["__scopeId","data-v-8860bb79"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Batches/Batches.vue"]]),wa={__name:"NewTool",emits:["createTool"],setup(D,{expose:t,emit:w}){t();const e=c(null),v=c([]),g=w,r=c(null),o=c({id:null,name:null,description:null,tool_class_id:null,code:null,image_list:null});async function n(){const u=await Z();r.value=u.data}n();const b=L({name:[{required:!0,message:"Please input Name",trigger:"blur"}],code:[{required:!0,message:"Please enter Code",trigger:"change"}],tool_class_id:[{required:!0,message:"Please select Tool Class",trigger:"change"}]}),p=u=>{v.value=u,o.value.image_list=u,console.log(u)},m=async()=>{try{let u=[];return o.value.image_list.length>0&&(u=(await K(o.value.image_list)).data.uploadedFiles||[],console.log(u),o.value.image_list=u.map(x=>x.url)),{uploadedImages:u}}catch{throw new Error("File upload failed")}},_=async()=>{e.value&&(await m(),await e.value.validate((u,s)=>{u&&(g("createTool",o.value),h())}))},h=()=>{e.value&&e.value.resetFields()},y={formRef:e,uploadedImages:v,emit:g,toolClasses:r,inputData:o,getToolClasses:n,rules:b,handleImageListUpdate:p,uploadFilesToServer:m,createTool:_,resetForm:h,ref:c,reactive:L,get getAllToolClasses(){return Z},FileUploadMultiple:ae,get uploadMultipleToMinio(){return K}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},Da={class:"details-layout"};function Pa(D,t,w,e,v,g){const r=i("el-text"),o=i("el-input"),n=i("el-form-item"),b=i("el-option"),p=i("el-select"),m=i("el-form"),_=i("el-button"),h=i("el-card");return V(),T(I,null,[a(h,null,{default:l(()=>[f("div",Da,[f("div",null,[a(r,{tag:"b"},{default:l(()=>t[4]||(t[4]=[d("General Details")])),_:1,__:[4]}),t[5]||(t[5]=f("hr",null,null,-1))]),a(m,{ref:"formRef",model:e.inputData,rules:e.rules,"label-width":"120px"},{default:l(()=>[a(n,{style:{flex:"1"},label:"Tool Name",prop:"name"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.name,"onUpdate:modelValue":t[0]||(t[0]=y=>e.inputData.name=y),placeholder:"Please input Tool Name",style:{width:"99%"}},null,8,["modelValue"])]),_:1}),k(" Code Input "),a(n,{style:{flex:"1"},label:"Tool Code",prop:"code"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.code,"onUpdate:modelValue":t[1]||(t[1]=y=>e.inputData.code=y),placeholder:"Please input Tool Code",style:{width:"99%"}},null,8,["modelValue"])]),_:1}),a(n,{style:{flex:"1"},label:"Description",prop:"description"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.description,"onUpdate:modelValue":t[2]||(t[2]=y=>e.inputData.description=y),placeholder:"Please Describe Tool",style:{width:"99%"},type:"textarea"},null,8,["modelValue"])]),_:1}),k(" Category Input  "),a(n,{label:"Tool Class",prop:"tool_class_id"},{default:l(()=>[a(p,{modelValue:e.inputData.tool_class_id,"onUpdate:modelValue":t[3]||(t[3]=y=>e.inputData.tool_class_id=y),style:{width:"99%"}},{default:l(()=>[(V(!0),T(I,null,O(e.toolClasses,y=>(V(),U(b,{key:y.id,label:y.name,value:y.id},{default:l(()=>[d(P(y.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{tag:"b"},{default:l(()=>t[6]||(t[6]=[d("Upload Image(s)")])),_:1,__:[6]}),t[7]||(t[7]=f("hr",null,null,-1)),a(e.FileUploadMultiple,{"onUpdate:imageList":e.handleImageListUpdate,"upload-type":"images","max-images":1})]),_:1,__:[7]},8,["model","rules"]),k(" Submit Button  ")]),f("div",{class:"submit-button",onClick:e.createTool},[a(n,null,{default:l(()=>[a(_,{type:"primary"},{default:l(()=>t[8]||(t[8]=[d("Create Tool")])),_:1,__:[8]})]),_:1})])]),_:1}),k(" <h1>{{ inputData }}</h1> ")],2112)}const ka=E(wa,[["render",Pa],["__scopeId","data-v-adf6c191"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Tools/NewTool.vue"]]),xa={__name:"EditTool",props:{data:Object},emits:["editTool"],setup(D,{expose:t,emit:w}){t();const e=D,v=w,g=c(null),r=c(e.data);S(()=>e.data,m=>{r.value=m},{deep:!0});async function o(){const m=await Z();g.value=m.data}o();const n=L({name:[{required:!0,message:"Please input Name",trigger:"blur"}],code:[{required:!0,message:"Please enter Code"}],tool_class_id:[{required:!0,message:"Please select Tool Class"}]});function b(){v("editTool",r.value)}const p={props:e,emit:v,toolClasses:g,inputData:r,getToolClasses:o,rules:n,editTool:b,ref:c,reactive:L,watch:S,get getAllToolClasses(){return Z}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},Ca={class:"details-layout"};function Ta(D,t,w,e,v,g){const r=i("el-text"),o=i("el-input"),n=i("el-form-item"),b=i("el-option"),p=i("el-select"),m=i("el-form"),_=i("el-button"),h=i("el-card");return V(),T(I,null,[a(h,null,{default:l(()=>[f("div",Ca,[f("div",null,[a(r,{tag:"b"},{default:l(()=>t[4]||(t[4]=[d("General Details")])),_:1,__:[4]}),t[5]||(t[5]=f("hr",null,null,-1))]),a(m,{ref:"ruleFormRef",model:e.inputData,rules:e.rules,"label-width":"120px"},{default:l(()=>[a(n,{style:{flex:"1"},label:"Tool Name",prop:"name"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.name,"onUpdate:modelValue":t[0]||(t[0]=y=>e.inputData.name=y),placeholder:"Please input Tool Name",style:{width:"99%"}},null,8,["modelValue"])]),_:1}),k(" Code Input "),a(n,{style:{flex:"1"},label:"Tool Code",prop:"code"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.code,"onUpdate:modelValue":t[1]||(t[1]=y=>e.inputData.code=y),placeholder:"Please input Tool Code",style:{width:"99%"}},null,8,["modelValue"])]),_:1}),a(n,{style:{flex:"1"},label:"Description",prop:"description"},{default:l(()=>[a(o,{clearable:"",modelValue:e.inputData.description,"onUpdate:modelValue":t[2]||(t[2]=y=>e.inputData.description=y),placeholder:"Please Describe Tool",style:{width:"99%"},type:"textarea"},null,8,["modelValue"])]),_:1}),k(" Category Input  "),a(n,{label:"Tool Class",prop:"tool_class_id"},{default:l(()=>[a(p,{modelValue:e.inputData.tool_class_id,"onUpdate:modelValue":t[3]||(t[3]=y=>e.inputData.tool_class_id=y),style:{width:"99%"}},{default:l(()=>[(V(!0),T(I,null,O(e.toolClasses,y=>(V(),U(b,{key:y.id,label:y.name,value:y.id},{default:l(()=>[d(P(y.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{tag:"b"},{default:l(()=>t[6]||(t[6]=[d("Upload Image(s)")])),_:1,__:[6]}),t[7]||(t[7]=f("hr",null,null,-1))]),_:1,__:[7]},8,["model","rules"]),k(" Submit Button  ")]),f("div",{class:"submit-button",onClick:e.editTool},[a(n,null,{default:l(()=>[a(_,{type:"primary"},{default:l(()=>t[8]||(t[8]=[d("Update Tool")])),_:1,__:[8]})]),_:1})])]),_:1}),k(" <h1>{{ inputData }}</h1> ")],2112)}const Sa=E(xa,[["render",Ta],["__scopeId","data-v-2e7a7d05"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Tools/EditTool.vue"]]),Ua={__name:"ConfirmDeletion",props:{data:Object,type:Number},emits:["emitDeleteTool","close"],setup(D,{expose:t,emit:w}){t();const e=D,v=c(e.data),g=w;S(()=>e.data,o=>{v.value=o},{deep:!0});const r={props:e,selectedTool:v,emit:g,ref:c,watch:S,get Delete(){return $},get CircleClose(){return be}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Ba={class:"popup"},Ia={class:"buttons"};function qa(D,t,w,e,v,g){const r=i("el-text"),o=i("el-button");return V(),T("div",Ba,[a(r,{tag:"b",size:"large"},{default:l(()=>[d("Are you sure you want to delete tool: '"+P(e.selectedTool.name)+"''",1)]),_:1}),f("div",Ia,[a(o,{icon:e.Delete,type:"danger",onClick:t[0]||(t[0]=n=>e.emit("emitDeleteTool",e.selectedTool))},{default:l(()=>t[2]||(t[2]=[d("Yes")])),_:1,__:[2]},8,["icon"]),a(o,{icon:e.CircleClose,type:"info",onClick:t[1]||(t[1]=n=>e.emit("close"))},{default:l(()=>t[3]||(t[3]=[d("No")])),_:1,__:[3]},8,["icon"])])])}const La=E(Ua,[["render",qa],["__scopeId","data-v-4ae6edf5"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Tools/ConfirmDeletion.vue"]]),Na={__name:"ToolsView",props:{newTool:Boolean,keyword:String},emits:["close"],setup(D,{expose:t,emit:w}){t();const e=D,v=w,g=c(e.newTool),r=c(!1),o=c(!1),n=c(null);S(()=>e.newTool,C=>{g.value=C});const b=c("737px");function p(){b.value=window.innerWidth<=1600?"521px":b.value}z(()=>{p(),window.addEventListener("resize",p)}),W(()=>{window.removeEventListener("resize",p)});const m=(C,R)=>{console.log(C+R),M({message:C+R,type:"success"})},_=L({page:1,size:20}),h=c({keyword:null}),y=c(null),u=c(null);async function s(){const C=await ue(_.page,_.size,"name","ASC",h.value);y.value=C.data.content,u.value=C.data.totalElements}s(),S(()=>e.keyword,C=>{h.value.keyword=C,s()});async function x(C){try{const R=await me(C);R.status==200&&(m("Tool Created: ",R.data.name),v("close"),s())}catch(R){console.log("Failed to create tool",R)}}async function B(C){try{(await _e(C)).status==200&&(m("Tool Updated: ",C.name),r.value=!1,s())}catch(R){console.log("Failed to update tool",R)}}async function A(C){await ce(C.id),console.log(C),m("Tool Deleted: ",C.name),o.value=!1,s()}function q(C){C.tool_class_id=C.tool_class.id,n.value=C,r.value=!0}function N(C){n.value=C,o.value=!0}const F={props:e,emit:v,newToolActive:g,editToolActive:r,deleteActive:o,selectedTool:n,maxHeight:b,updateHeight:p,apiSuccess:m,listQuery:_,search:h,tools:y,totalItems:u,getToolsData:s,handleCreate:x,handleEdit:B,handleDelete:A,editTool:q,selectDeleteTool:N,handleCurrentChange:C=>{_.page=C,s()},ref:c,onMounted:z,onBeforeUnmount:W,watch:S,reactive:L,get convertToLocalTime(){return te},get EditPen(){return ee},get Delete(){return $},get ElMessage(){return M},NewTool:ka,EditTool:Sa,ConfirmDeletion:La,get searchTools(){return ue},get createTool(){return me},get updateTool(){return _e},get deleteTool(){return ce}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},Aa={class:"page-layout"},Ea={class:"table-body"};function Ma(D,t,w,e,v,g){const r=i("el-dialog"),o=i("el-image"),n=i("el-table-column"),b=i("el-button"),p=i("el-table"),m=i("el-pagination");return V(),T("div",Aa,[a(r,{modelValue:e.newToolActive,"onUpdate:modelValue":t[0]||(t[0]=_=>e.newToolActive=_),title:"New Tool",width:"800",top:"5vh",onClose:t[1]||(t[1]=()=>{e.newToolActive=!1,e.emit("close")})},{default:l(()=>[a(e.NewTool,{onCreateTool:e.handleCreate})]),_:1},8,["modelValue"]),a(r,{modelValue:e.editToolActive,"onUpdate:modelValue":t[2]||(t[2]=_=>e.editToolActive=_),title:"Update Tool",width:"800",top:"5vh",onClose:t[3]||(t[3]=()=>{e.editToolActive=!1})},{default:l(()=>[a(e.EditTool,{onEditTool:e.handleEdit,data:e.selectedTool},null,8,["data"])]),_:1},8,["modelValue"]),a(r,{modelValue:e.deleteActive,"onUpdate:modelValue":t[5]||(t[5]=_=>e.deleteActive=_),title:"Confirm Tool Deletion",width:"450px"},{default:l(()=>[a(e.ConfirmDeletion,{data:e.selectedTool,onEmitDeleteTool:e.handleDelete,onClose:t[4]||(t[4]=_=>e.deleteActive=!1)},null,8,["data"])]),_:1},8,["modelValue"]),f("div",Ea,[a(p,{data:e.tools,style:Se({width:"100%",height:e.maxHeight}),border:""},{default:l(()=>[a(n,{width:"110px"},{default:l(({row:_})=>[_.image_list.length>0?(V(),U(o,{key:0,src:_.image_list,style:{width:"80px"}},null,8,["src"])):k("v-if",!0)]),_:1}),a(n,{prop:"name",label:"Name",sortable:""}),a(n,{prop:"code",label:"Code",sortable:""}),a(n,{prop:"description",label:"Description",width:"300px"}),a(n,{prop:"tool_class.name",label:"Tool Class",sortable:""}),a(n,{label:"Last Updated",sortable:""},{default:l(({row:_})=>[d(P(_.updated_at?e.convertToLocalTime(_.updated_at):null),1)]),_:1}),a(n,{prop:"updated_by",label:"Updated By",sortable:""}),k(" Actions "),a(n,{label:D.$t("workOrder.table.actions"),align:"center",width:"250","class-name":"small-padding fixed-width action-column",fixed:"right"},{default:l(({row:_})=>[a(b,{icon:e.EditPen,type:"success",size:"large",onClick:h=>e.editTool(_)},{default:l(()=>t[6]||(t[6]=[d("Edit ")])),_:2,__:[6]},1032,["icon","onClick"]),a(b,{icon:e.Delete,type:"danger",size:"large",onClick:h=>e.selectDeleteTool(_)},{default:l(()=>t[7]||(t[7]=[d("Delete")])),_:2,__:[7]},1032,["icon","onClick"])]),_:1},8,["label"])]),_:1},8,["data","style"]),a(m,{layout:"prev, pager, next","current-page":e.listQuery.page,"page-size":e.listQuery.size,total:e.totalItems,"pager-count":3,onCurrentChange:e.handleCurrentChange,class:"pagination"},null,8,["current-page","page-size","total"])])])}const Oa=E(Na,[["render",Ma],["__scopeId","data-v-99e7105d"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/components/Tools/ToolsView.vue"]]),Ra={__name:"index",setup(D,{expose:t}){t();const w=c("first"),e=c(!1),v=c(!1),g=c(!1),r=c([]),o=c(null),n=c(0),b=c(null),p=c({}),m=c(null),_=L({page:1,limit:10,sort:"-id"});S(()=>m.value,C=>{console.log(C),p.value={keyword:C}});async function h(){const C=await pe(_.page,_.limit,"name","ASC",p.value);r.value=C.data.content,b.value=C.data.totalElements,o.value=r.value[n.value]}h(),S(()=>p,C=>{h()},{immediate:!0,deep:!0});const y=c("770px");function u(){y.value=window.innerWidth<=1600?"521px":"737px"}z(()=>{u(),window.addEventListener("resize",u)}),W(()=>{window.removeEventListener("resize",u)});function s(C){n.value=C.index,o.value=C}z(()=>{o.value=r.value[0]});async function x(C){C&&(e.value=!1,g.value=!1),h()}const B=c(1),A=C=>{_.page=C,h()},q=C=>{B.value=C==="a"?1:2},N=G(()=>B.value===1?"Spare Parts":"Tools"),j=G(()=>B.value===1?"Magnet":"Tools"),F={activeName:w,dialogVisible:e,newTool:v,editing:g,spareParts:r,selectedData:o,selectedIndex:n,totalItems:b,search:p,keyword:m,listQuery:_,getAllSparePartsData:h,maxHeight:y,updateHeight:u,getSelection:s,handleCreate:x,currentView:B,handleCurrentChange:A,handleCommand:q,currentLabel:N,currentIcon:j,onMounted:z,ref:c,onBeforeUnmount:W,computed:G,reactive:L,watch:S,CardTable:Ve,ViewDetails:Oe,Usage:je,Transactions:Ke,History:Ze,Vendors:Ct,NewSparePart:Et,EditSparePart:Wt,get EditPen(){return ee},get Search(){return ge},get Filter(){return Te},get Tools(){return Ce},get Magnet(){return xe},Batches:Va,ToolsView:Oa,get searchSpareParts(){return pe}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},Fa={class:"outer-container"},ja={class:"header"},za={class:"left-header"},Ha={class:"right-header"},Qa={key:0,class:"main-container-sp"},Ga={class:"table-container"},Ka={class:"content-container"},Wa={key:0,class:"tab-container"},Ya={style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},Za={key:1,class:"edit-container"},Ja={key:1};function Xa(D,t,w,e,v,g){const r=i("el-input"),o=i("el-icon"),n=i("arrow-down"),b=i("el-text"),p=i("el-dropdown-item"),m=i("el-dropdown-menu"),_=i("el-dropdown"),h=i("el-button"),y=i("el-dialog"),u=i("el-tab-pane"),s=i("el-tabs"),x=i("el-card");return V(),T("div",Fa,[f("div",ja,[f("div",za,[a(r,{modelValue:e.keyword,"onUpdate:modelValue":t[0]||(t[0]=B=>e.keyword=B),placeholder:e.currentView===1?"Search Spare Part":"Search Tool",style:{width:"240px"},size:"small","prefix-icon":e.Search,clearable:""},null,8,["modelValue","placeholder","prefix-icon"]),a(o,{style:{cursor:"pointer"},title:"Filter"},{default:l(()=>[a(e.Filter)]),_:1})]),f("div",Ha,[a(_,{onCommand:e.handleCommand},{dropdown:l(()=>[a(m,null,{default:l(()=>[a(p,{command:"a",icon:e.Magnet},{default:l(()=>t[10]||(t[10]=[d("Spare Parts")])),_:1,__:[10]},8,["icon"]),a(p,{command:"b",icon:e.Tools},{default:l(()=>t[11]||(t[11]=[d("Tools")])),_:1,__:[11]},8,["icon"])]),_:1})]),default:l(()=>[a(b,{class:"el-dropdown-link",style:{border:"solid 1px #d5d5d5",padding:"5px"}},{default:l(()=>[a(o,null,{default:l(()=>[(V(),U(Ue(e.currentIcon)))]),_:1}),d(" "+P(e.currentLabel),1),a(o,{class:"el-icon--right"},{default:l(()=>[a(n)]),_:1})]),_:1})]),_:1}),a(h,{onClick:t[1]||(t[1]=()=>e.currentView===1?e.dialogVisible=!0:e.newTool=!0),type:"primary"},{default:l(()=>[d(P(e.currentView===1?"Create Spare Part":"Create Tool"),1)]),_:1})])]),e.currentView===1?(V(),T("div",Qa,[a(y,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=B=>e.dialogVisible=B),title:"New Spare Part",width:"800",top:"5vh"},{default:l(()=>[a(e.NewSparePart,{onCreatePart:e.handleCreate})]),_:1},8,["modelValue"]),f("div",Ga,[a(e.CardTable,{onSelection:e.getSelection,module:1,data:e.spareParts,maxHeight:e.maxHeight,totalItems:e.totalItems,handleCurrentChange:e.handleCurrentChange,currentPage:e.listQuery.page},null,8,["data","maxHeight","totalItems","currentPage"])]),f("div",Ka,[e.editing?k("v-if",!0):(V(),T("div",Wa,[a(x,null,{default:l(()=>[f("div",Ya,[e.selectedData?(V(),U(b,{key:0,tag:"b",size:"large"},{default:l(()=>[d(P(e.selectedData.name),1)]),_:1})):k("v-if",!0),a(h,{icon:e.EditPen,onClick:t[3]||(t[3]=()=>e.editing=!0)},{default:l(()=>t[12]||(t[12]=[d("Edit")])),_:1,__:[12]},8,["icon"])]),a(s,{modelValue:e.activeName,"onUpdate:modelValue":t[6]||(t[6]=B=>e.activeName=B),type:"card",class:"demo-tabs",onTabClick:D.handleClick,style:{"margin-top":"10px"}},{default:l(()=>[a(u,{label:"Details",name:"first"},{default:l(()=>[a(e.ViewDetails,{data:e.selectedData,"onUpdate:data":t[4]||(t[4]=B=>e.selectedData=B)},null,8,["data"])]),_:1}),a(u,{label:"Batches",name:"second"},{default:l(()=>[a(e.Batches,{sparePart:e.selectedData},null,8,["sparePart"])]),_:1}),a(u,{label:"Usage",name:"third"},{default:l(()=>[a(e.Usage)]),_:1}),a(u,{label:"Transactions",name:"fourth"},{default:l(()=>[a(e.Transactions,{sparePart:e.selectedData},null,8,["sparePart"])]),_:1}),a(u,{label:"History",name:"fifth"},{default:l(()=>[a(e.History)]),_:1}),a(u,{label:"Vendors",name:"sixth"},{default:l(()=>[a(e.Vendors,{data:e.selectedData,onRefreshData:t[5]||(t[5]=B=>e.getAllSparePartsData())},null,8,["data"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1})])),e.editing?(V(),T("div",Za,[a(e.EditSparePart,{data:e.selectedData,onCancel:t[7]||(t[7]=()=>e.editing=!1),onUpdatePart:e.handleCreate},null,8,["data"])])):k("v-if",!0)])])):k("v-if",!0),e.currentView===2?(V(),T("div",Ja,[a(e.ToolsView,{keyword:e.keyword,"onUpdate:keyword":t[8]||(t[8]=B=>e.keyword=B),newTool:e.newTool,onClose:t[9]||(t[9]=()=>e.newTool=!1)},null,8,["keyword","newTool"])])):k("v-if",!0)])}const Fl=E(Ra,[["render",Xa],["__scopeId","data-v-40af56ac"],["__file","/home/erikyu/dev/mes-maintenance-frontend/src/views/resources/index.vue"]]);export{Fl as default};
